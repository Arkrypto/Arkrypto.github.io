(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1465:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("è½¯ä»¶ä¸šçš„äººä¹äºåšè¿™æ ·çš„äº‹ â€”â€” æ‰¾ä¸€äº›è¯æ±‡ï¼Œå¹¶æŠŠå®ƒä»¬å¼•ç”³åˆ°å¤§é‡å¾®å¦™è€Œåˆäº’ç›¸çŸ›ç›¾çš„æ„ä¹‰ â€”â€” ã€ŠPatterns of Enterprise Application Architectureã€‹")])]),s._v(" "),t("h2",{attrs:{id:"åˆ†å¸ƒå¼ç³»ç»Ÿæ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼ç³»ç»Ÿæ¦‚è¿°"}},[s._v("#")]),s._v(" åˆ†å¸ƒå¼ç³»ç»Ÿæ¦‚è¿°")]),s._v(" "),t("p",[s._v("åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®šä¹‰ï¼šå¤šä¸ªè®¡ç®—æœºé€šè¿‡ç½‘ç»œååŒå·¥ä½œè€Œå¯¹å¤–è¡¨ç°ä¸ºä¸€ä¸ªæ•´ä½“")]),s._v(" "),t("p",[s._v("å…¸å‹åº”ç”¨")]),s._v(" "),t("ul",[t("li",[s._v("åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå¦‚ MongoDBã€HBaseï¼‰")]),s._v(" "),t("li",[s._v("åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆå¦‚ Hadoop HDFSã€Cephï¼‰")]),s._v(" "),t("li",[s._v("åˆ†å¸ƒå¼è®¡ç®—ï¼ˆå¦‚ Sparkã€Flinkï¼‰")]),s._v(" "),t("li",[s._v("å¾®æœåŠ¡æ¶æ„ï¼ˆå¦‚ Spring Cloudã€Dubboï¼‰")])]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ")]),s._v(" "),t("p",[s._v("è¦è§£é‡Šä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¾—ä»åˆ†å¸ƒå¼æ¶æ„è¯´èµ·ï¼Œå®ƒå®šä¹‰äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°æ–¹æ³•ï¼Œå®ƒæè¿°äº†ç³»ç»Ÿçš„ç»“æ„ã€ç»„ä»¶å¦‚ä½•äº¤äº’ã€æ•°æ®å¦‚ä½•å­˜å‚¨ã€è®¡ç®—å¦‚ä½•åˆ†é…ç­‰ã€‚å¯ä»¥è¯´ï¼Œæ¶æ„æ˜¯é’¢ç­‹ï¼Œè€Œç³»ç»Ÿæ˜¯æ¥¼æˆ¿ï¼Œç³»ç»Ÿä¾èµ–äºæ¶æ„")]),s._v(" "),t("p",[s._v("å¸¸è§çš„åˆ†å¸ƒå¼æ¶æ„æ¨¡å¼")]),s._v(" "),t("ol",[t("li",[s._v("ä¸»ä»æ¶æ„ï¼ˆMaster-Slaveï¼‰ï¼šé€‚ç”¨äºæ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Œå¦‚ MySQL ä¸»ä»å¤åˆ¶")]),s._v(" "),t("li",[s._v("åˆ†ç‰‡æ¶æ„ï¼ˆShardingï¼‰ï¼šé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ï¼Œå¦‚ Elasticsearch æ•°æ®åˆ†ç‰‡")]),s._v(" "),t("li",[s._v("å¾®æœåŠ¡æ¶æ„ï¼ˆMicroservicesï¼‰ï¼šé€‚ç”¨äºä¼ä¸šçº§åº”ç”¨ï¼Œå¦‚ Spring Cloud/Dubbo")]),s._v(" "),t("li",[s._v("äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDA, Event-Driven Architectureï¼‰ï¼šé€‚ç”¨äºé«˜ååä¸šåŠ¡ï¼Œå¦‚ Kafka æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†æ—¥å¿—æµ")])]),s._v(" "),t("p",[s._v("åœ¨è¿™äº›æ¶æ„æ¨¡å¼ä¹‹ä¸Šï¼Œæ„å»ºäº†ä¸€ä¸ªä¸ªæ‰€è°“çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚æœ€å¸¸è§çš„åº”ç”¨æ·˜å®ã€äº¬ä¸œç­‰ï¼Œéƒ½æ˜¯é‡‡ç”¨"),t("strong",[s._v("å¾®æœåŠ¡æ¶æ„")]),s._v("çš„åˆ†å¸ƒå¼ç³»ç»Ÿ")]),s._v(" "),t("p",[s._v("é€šå¸¸ï¼ŒSpring å°å­ï¼ˆæ²¡é”™å°±æ˜¯æˆ‘ï¼‰å¼€å‘çš„æ‰€è°“åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéƒ½æ˜¯æŒ‡çš„å¾®æœåŠ¡æ¶æ„ï¼ˆSpring Cloudï¼‰ä¸Šçš„åˆ†å¸ƒå¼ç³»ç»Ÿ")]),s._v(" "),t("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†å¸ƒå¼è®¾è®¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†å¸ƒå¼è®¾è®¡"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†å¸ƒå¼è®¾è®¡")]),s._v(" "),t("p",[s._v("åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒç‰¹ç‚¹")]),s._v(" "),t("ul",[t("li",[s._v("å¤šæœºåä½œï¼šä»»åŠ¡ç”±å¤šä¸ªè®¡ç®—æœºåä½œå®Œæˆï¼Œè€Œéå•æœºå¤„ç†")]),s._v(" "),t("li",[s._v("æ•°æ®å…±äº«ï¼šä¸åŒèŠ‚ç‚¹ä¹‹é—´å…±äº«æ•°æ®ï¼Œå¯èƒ½æ¶‰åŠæ•°æ®ä¸€è‡´æ€§é—®é¢˜")]),s._v(" "),t("li",[s._v("å»ä¸­å¿ƒåŒ–ï¼šé¿å…å•ç‚¹æ•…éšœï¼Œæé«˜ç³»ç»Ÿå¯ç”¨æ€§")]),s._v(" "),t("li",[s._v("å¹¶å‘æ€§ï¼šå¤šä¸ªèŠ‚ç‚¹å¯ä»¥å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œæé«˜ååé‡")]),s._v(" "),t("li",[s._v("å®¹é”™èƒ½åŠ›ï¼šæŸäº›èŠ‚ç‚¹å®•æœºæ—¶ï¼Œç³»ç»Ÿä»èƒ½ç»§ç»­è¿è¡Œ")])]),s._v(" "),t("p",[s._v("è¯´ç™½äº†ï¼Œå°±æ˜¯æ‰©å±•æ€§å¥½ã€ç¨³å®šæ€§é«˜ã€å®¹é”™å¼º â€”â€” æ‰€è°“â€œç‹¡å…”ä¸‰çªŸâ€")]),s._v(" "),t("h2",{attrs:{id:"spring-cloud"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud"}},[s._v("#")]),s._v(" Spring Cloud")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯-spring-cloud"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-spring-cloud"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯ Spring Cloud")]),s._v(" "),t("p",[s._v("åˆšåˆšä¹Ÿè¯´åˆ°ï¼ŒSpring Cloud æ˜¯ Java ç”Ÿæ€ä¸­æœ€æˆç†Ÿçš„"),t("strong",[s._v("å¾®æœåŠ¡æ¶æ„")]),s._v("è§£å†³æ–¹æ¡ˆä¹‹ä¸€")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å¾®æœåŠ¡æ¶æ„ï¼ˆMicroservices Architectureï¼‰")]),s._v(" æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå®ƒå°†åº”ç”¨æ‹†åˆ†ä¸º"),t("strong",[s._v("å¤šä¸ªç‹¬ç«‹è¿è¡Œçš„æœåŠ¡")]),s._v("ï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£å•ä¸€ä¸šåŠ¡åŠŸèƒ½ï¼ŒæœåŠ¡ä¹‹é—´é€šè¿‡ APIï¼ˆé€šå¸¸æ˜¯ HTTP+JSON æˆ– gRPCï¼‰è¿›è¡Œé€šä¿¡")])]),s._v(" "),t("p",[s._v("Spring Cloud å°±æ˜¯ä¸“é—¨ç”¨äº"),t("strong",[s._v("æ„å»ºã€ç®¡ç†å’Œç»´æŠ¤å¾®æœåŠ¡æ¶æ„")]),s._v("çš„æ¡†æ¶ï¼Œæä¾›äº†ä¸€æ•´å¥—å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–"),t("strong",[s._v("æœåŠ¡æ³¨å†Œå‘ç°ã€è´Ÿè½½å‡è¡¡ã€é…ç½®ç®¡ç†ã€ç†”æ–­é™æµã€åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª")]),s._v("ç­‰å…³é”®åŠŸèƒ½")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("ç»„ä»¶")]),s._v(" "),t("th",[s._v("ä½œç”¨")]),s._v(" "),t("th",[s._v("å…·ä½“è€Œè¨€")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("Spring Cloud Eureka")]),s._v(" "),t("td",[s._v("æœåŠ¡æ³¨å†Œä¸å‘ç°")]),s._v(" "),t("td",[s._v("è´Ÿè´£ç®¡ç†å¾®æœåŠ¡å®ä¾‹ï¼Œç±»ä¼¼äº DNS")])]),s._v(" "),t("tr",[t("td",[s._v("Spring Cloud LoadBalancer")]),s._v(" "),t("td",[s._v("è´Ÿè½½å‡è¡¡")]),s._v(" "),t("td",[s._v("è®©å¤šä¸ªå®ä¾‹å‡è¡¡æ¥æ”¶è¯·æ±‚")])]),s._v(" "),t("tr",[t("td",[s._v("Spring Cloud OpenFeign")]),s._v(" "),t("td",[s._v("æœåŠ¡è°ƒç”¨")]),s._v(" "),t("td",[s._v("é€šè¿‡ HTTP è¿œç¨‹è°ƒç”¨å…¶ä»–å¾®æœåŠ¡")])]),s._v(" "),t("tr",[t("td",[s._v("Spring Cloud Gateway")]),s._v(" "),t("td",[s._v("API ç½‘å…³")]),s._v(" "),t("td",[s._v("ç»Ÿä¸€æµé‡å…¥å£ï¼Œè·¯ç”±è¯·æ±‚å¹¶æä¾›å®‰å…¨æ§åˆ¶")])]),s._v(" "),t("tr",[t("td",[s._v("Spring Cloud Config")]),s._v(" "),t("td",[s._v("é…ç½®ç®¡ç†")]),s._v(" "),t("td",[s._v("ç»Ÿä¸€ç®¡ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„é…ç½®")])]),s._v(" "),t("tr",[t("td",[s._v("Spring Cloud Sleuth & Zipkin")]),s._v(" "),t("td",[s._v("åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª")]),s._v(" "),t("td",[s._v("ç›‘æ§è¯·æ±‚çš„è°ƒç”¨é“¾è·¯ï¼Œæ’æŸ¥æ€§èƒ½ç“¶é¢ˆ")])]),s._v(" "),t("tr",[t("td",[s._v("Spring Cloud Resilience4J")]),s._v(" "),t("td",[s._v("ç†”æ–­é™æµ")]),s._v(" "),t("td",[s._v("ä¿æŠ¤æœåŠ¡é¿å…é›ªå´©æ•ˆåº”ï¼ˆCircuit Breakerï¼‰")])]),s._v(" "),t("tr",[t("td",[s._v("Spring Cloud Stream")]),s._v(" "),t("td",[s._v("æ¶ˆæ¯é˜Ÿåˆ—")]),s._v(" "),t("td",[s._v("è®©æœåŠ¡é—´å¼‚æ­¥é€šä¿¡ï¼ˆæ”¯æŒ Kafkaã€RabbitMQï¼‰")])])])]),s._v(" "),t("p",[s._v("SpringCloud ä¸»è¦åŸºäº SpringBoot")]),s._v(" "),t("h3",{attrs:{id:"ä¸€ä¸ªç»å…¸çš„-spring-cloud-æ¶æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ä¸ªç»å…¸çš„-spring-cloud-æ¶æ„"}},[s._v("#")]),s._v(" ä¸€ä¸ªç»å…¸çš„ Spring Cloud æ¶æ„")]),s._v(" "),t("p",[s._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼ŒåŒ…å«")]),s._v(" "),t("ul",[t("li",[s._v("ç”¨æˆ·æœåŠ¡ï¼ˆUser Serviceï¼‰")]),s._v(" "),t("li",[s._v("è®¢å•æœåŠ¡ï¼ˆOrder Serviceï¼‰")]),s._v(" "),t("li",[s._v("å•†å“æœåŠ¡ï¼ˆProduct Serviceï¼‰")]),s._v(" "),t("li",[s._v("æ”¯ä»˜æœåŠ¡ï¼ˆPayment Serviceï¼‰")]),s._v(" "),t("li",[s._v("ç½‘å…³ï¼ˆGatewayï¼‰")])]),s._v(" "),t("p",[s._v("å…¶ä½“ç³»æ¶æ„å¦‚ä¸‹")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------------------+")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Spring Cloud Gateway  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------------------+")]),s._v("\n                                 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------------+------------------+")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+      +------------+      +------------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ç”¨æˆ·æœåŠ¡    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" è®¢å•æœåŠ¡    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" å•†å“æœåŠ¡    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--\x3e | (Order)    | <--\x3e | (Product)  |")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+      +------------+      +------------+")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------------+")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                                     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+                      +----------------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" æ”¯ä»˜æœåŠ¡    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" æ¶ˆæ¯é˜Ÿåˆ—"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Kafka"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Payment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------------\x3e | äº‹ä»¶é©±åŠ¨        |")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+                      +----------------+")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("åœ¨è¿™ä¸ªæ¶æ„ä¸­")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Spring Cloud Gateway")]),s._v(" å……å½“ API å…¥å£ï¼Œç®¡ç†æ‰€æœ‰ HTTP è¯·æ±‚")]),s._v(" "),t("li",[t("strong",[s._v("Eureka")]),s._v(" ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰å¾®æœåŠ¡å®ä¾‹ï¼Œå®ç°"),t("strong",[s._v("æœåŠ¡å‘ç°")])]),s._v(" "),t("li",[t("strong",[s._v("Feign")]),s._v(" è®©æœåŠ¡ä¹‹é—´å¯ä»¥æ›´ä¼˜é›…åœ°ç›¸äº’è°ƒç”¨ï¼ˆç›´æ¥ä» Eureka ä¸­å¯»æ‰¾ï¼‰ï¼Œè€Œä¸ç”¨è‡ªå·±å†™ HTTP è¯·æ±‚")]),s._v(" "),t("li",[t("strong",[s._v("Resilience4J")]),s._v(" ç¡®ä¿æœåŠ¡æ•…éšœæ—¶è‡ªåŠ¨ç†”æ–­ï¼Œé˜²æ­¢çº§è”æ•…éšœ")]),s._v(" "),t("li",[t("strong",[s._v("Kafka")]),s._v(" å®ç°å¼‚æ­¥æ¶ˆæ¯é€šä¿¡ï¼ˆå¦‚è®¢å•å®Œæˆåé€šçŸ¥æ”¯ä»˜æœåŠ¡ï¼‰")])]),s._v(" "),t("h3",{attrs:{id:"nio-å’Œ-netty"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nio-å’Œ-netty"}},[s._v("#")]),s._v(" NIO å’Œ Netty")]),s._v(" "),t("blockquote",[t("p",[s._v("Spring Cloud ç”Ÿæ€ä¸­ä¼—å¤šå¾®æœåŠ¡ç»„ä»¶çš„åº•å±‚é€šä¿¡ç»„ä»¶")])]),s._v(" "),t("p",[s._v("Nettyï¼šåŸºäº Java NIO å¼€å‘çš„ç½‘ç»œæµæ¡†æ¶ï¼Œæ˜¯ Java é¢†åŸŸéå¸¸å¼ºå¤§çš„"),t("strong",[s._v("é«˜æ€§èƒ½ç½‘ç»œé€šä¿¡æ¡†æ¶")]),s._v("ï¼Œå¾ˆå¤šä¸­é—´ä»¶ï¼ˆDubboã€Elasticsearchã€RocketMQã€gRPC ç­‰ï¼‰éƒ½ç”¨å®ƒä½œä¸ºåº•å±‚é€šä¿¡ç»„ä»¶")]),s._v(" "),t("p",[s._v("ç®€å•æ¥è¯´ï¼šNetty æ˜¯ "),t("strong",[s._v("ä¸€ä¸ªå°è£…äº† Java NIO çš„ç½‘ç»œæ¡†æ¶")]),s._v("ï¼Œè®©å¼€å‘è€…èƒ½è½»æ¾æ„å»ºé«˜æ€§èƒ½çš„ TCP/UDP ç½‘ç»œæœåŠ¡ï¼Œè€Œä¸ç”¨è‡ªå·±å»å†™ç¹ççš„ Selectorã€Channelã€Buffer è¿™äº›ä½çº§ API")]),s._v(" "),t("p",[t("strong",[s._v("ä»€ä¹ˆæ˜¯ NIOï¼Ÿ")])]),s._v(" "),t("p",[s._v("NIOï¼ˆNew Input/Outputï¼‰ æ˜¯ Java 1.4 å¼•å…¥çš„ä¸€ç»„ APIï¼Œç”¨äºæä¾›**éé˜»å¡ï¼ˆAsynchronousï¼‰**çš„è¾“å…¥è¾“å‡ºæ“ä½œï¼Œå®ƒè®©æˆ‘ä»¬èƒ½æ›´é«˜æ•ˆåœ°å¤„ç†å¤§é‡çš„ I/O æ“ä½œ")]),s._v(" "),t("p",[s._v("NIO ä¸»è¦çš„ä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿ"),t("strong",[s._v("ä¸é˜»å¡çº¿ç¨‹")]),s._v("æ¥å¤„ç† I/O æ“ä½œï¼Œå®ƒæ˜¯ä¸ºäº†å¼¥è¡¥ä¼ ç»Ÿçš„é˜»å¡ I/Oï¼ˆBIOï¼‰å’Œ é«˜å¹¶å‘åœºæ™¯ä¸‹æ€§èƒ½ç“¶é¢ˆè€Œè®¾è®¡çš„")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ€ä¹ˆå®ç°çš„éé˜»å¡ï¼Ÿ")])])]),s._v(" "),t("p",[t("strong",[s._v("Selector")]),s._v(" å’Œ "),t("strong",[s._v("Channel")]),s._v(" æ˜¯ NIO çš„æ ¸å¿ƒç»„æˆï¼Œé€šè¿‡"),t("strong",[s._v("äº‹ä»¶é©±åŠ¨")]),s._v("å®ç°å¼‚æ­¥éé˜»å¡ I/O æ“ä½œ")]),s._v(" "),t("p",[t("strong",[s._v("Netty é«˜æ€§èƒ½çš„å…³é”®")])]),s._v(" "),t("p",[s._v("ğŸ”¹ 1. çº¿ç¨‹æ±  + äº‹ä»¶é©±åŠ¨")]),s._v(" "),t("p",[s._v("Netty é‡‡ç”¨å¤š Reactor çº¿ç¨‹æ¨¡å‹ï¼Œé€šè¿‡ "),t("strong",[s._v("EventLoopGroup + çº¿ç¨‹æ± ")]),s._v("ï¼Œé¿å…ä¼ ç»Ÿ BIO çš„"),t("strong",[s._v("ä¸€çº¿ç¨‹ä¸€è¿æ¥")]),s._v("ä½æ•ˆæ¨¡å¼")]),s._v(" "),t("ul",[t("li",[s._v("BIOï¼ˆé˜»å¡ IOï¼‰ï¼šä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªè¿æ¥")]),s._v(" "),t("li",[s._v("NIOï¼ˆéé˜»å¡ IOï¼‰ï¼šå¤šä¸ªè¿æ¥å…±äº«ä¸€ä¸ªçº¿ç¨‹")]),s._v(" "),t("li",[s._v("Nettyï¼ˆå¤š Reactor æ¨¡å‹ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹æ± é«˜æ•ˆç®¡ç†è¿æ¥")])]),s._v(" "),t("p",[s._v("ğŸ“Œ ç¤ºä¾‹ï¼šNetty çº¿ç¨‹æ± ")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EventLoopGroup")]),s._v(" bossGroup "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NioEventLoopGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¤„ç†è¿æ¥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EventLoopGroup")]),s._v(" workerGroup "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NioEventLoopGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¤„ç†è¯»å†™")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("ğŸ”¹ 2. é›¶æ‹·è´ï¼ˆZero-Copyï¼‰")]),s._v(" "),t("p",[s._v("Netty é€šè¿‡ "),t("strong",[s._v("DirectByteBufã€CompositeByteBuf")]),s._v(" è¿›è¡Œé›¶æ‹·è´ä¼˜åŒ–")]),s._v(" "),t("ul",[t("li",[s._v("å‡å°‘ CPU æ‹·è´ï¼ˆé¿å… "),t("code",[s._v("System.arraycopy")]),s._v("ï¼‰")]),s._v(" "),t("li",[s._v("å‡å°‘å†…å­˜åˆ†é…ï¼ˆå‡å°‘ GC å‹åŠ›ï¼‰")]),s._v(" "),t("li",[t("strong",[s._v("å‡å°‘ "),t("strong",[s._v("Buffer")]),s._v(" å¤åˆ¶")]),s._v("ï¼ˆç›´æ¥æ“ä½œå †å¤–å†…å­˜ï¼‰")])]),s._v(" "),t("p",[s._v("ğŸ“Œ **ç¤ºä¾‹ï¼š**Netty ç›´æ¥ä½¿ç”¨å †å¤–å†…å­˜")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ByteBuf")]),s._v(" buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Unpooled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("directBuffer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç›´æ¥åˆ†é…å †å¤–å†…å­˜")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ğŸ”¹ 3. Pooled Bufferï¼ˆæ± åŒ–å†…å­˜ï¼‰")]),s._v(" "),t("p",[s._v("Netty ä½¿ç”¨å†…å­˜æ± ï¼ˆBuffer Poolï¼‰ï¼Œé‡å¤åˆ©ç”¨ ByteBufï¼Œé¿å…åå¤åˆ›å»ºå¯¹è±¡")]),s._v(" "),t("p",[s._v("ğŸ“Œ ç¤ºä¾‹ï¼šä½¿ç”¨æ± åŒ–çš„ ByteBuf")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ByteBuf")]),s._v(" pooledBuf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PooledByteBufAllocator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("buffer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ğŸ”¹ 4. TCP ç²˜åŒ…/æ‹†åŒ…å¤„ç†")]),s._v(" "),t("p",[s._v("TCP å‘é€æ•°æ®æ—¶ï¼Œå¤šä¸ªå°åŒ…å¯èƒ½åˆå¹¶æˆä¸€ä¸ªå¤§åŒ…ï¼ˆ"),t("strong",[s._v("ç²˜åŒ…")]),s._v("ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªå¤§åŒ…è¢«æ‹†æˆå¤šä¸ªå°åŒ…ï¼ˆ"),t("strong",[s._v("æ‹†åŒ…")]),s._v("ï¼‰ã€‚Netty é€šè¿‡"),t("strong",[s._v("è§£ç å™¨")]),s._v("è§£å†³æ­¤é—®é¢˜")]),s._v(" "),t("p",[s._v("ğŸ“Œ ç¤ºä¾‹ï¼šä½¿ç”¨ Netty æä¾›çš„æ‹†åŒ…è§£ç å™¨")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("ch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pipeline")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addLast")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LengthFieldBasedFrameDecoder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ä¸Šé¢è¿™ä¸ª LengthFieldBasedFrameDecoder è§£ç å™¨")]),s._v(" "),t("ul",[t("li",[s._v("æŒ‰ç…§æ•°æ®åŒ…é•¿åº¦å­—æ®µè§£ææ¶ˆæ¯")]),s._v(" "),t("li",[s._v("é¿å… TCP ç²˜åŒ…/æ‹†åŒ…é—®é¢˜")])]),s._v(" "),t("h2",{attrs:{id:"å¸¸ç”¨ç»„ä»¶å’Œä¸­é—´ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨ç»„ä»¶å’Œä¸­é—´ä»¶"}},[s._v("#")]),s._v(" å¸¸ç”¨ç»„ä»¶å’Œä¸­é—´ä»¶")]),s._v(" "),t("h3",{attrs:{id:"nacos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nacos"}},[s._v("#")]),s._v(" Nacos")]),s._v(" "),t("blockquote",[t("p",[s._v("æ³¨å†Œä¸­å¿ƒæ˜¯"),t("strong",[s._v("å¾®æœåŠ¡é€šä¿¡çš„æ ¸å¿ƒ")]),s._v("ï¼Œä¸ç®¡æ˜¯ Eurekaã€Feign è¿˜æ˜¯ Dubboï¼Œä»–ä»¬çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å‡è¦åœ¨æ³¨å†Œä¸­å¿ƒè¿›è¡ŒåŠ¨æ€ç®¡ç†")])]),s._v(" "),t("p",[s._v("Nacos æ˜¯ SpringCloud Alibaba çš„ç»„ä»¶ï¼Œè€Œ SpringCloud Alibaba éµå¾ª SpringCloud ä¸­å®šä¹‰çš„æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°è§„èŒƒï¼Œå› æ­¤ä½¿ç”¨ Nacos å’Œä½¿ç”¨ Eureka å¯¹äºå¾®æœåŠ¡æ¥å£è€Œè¨€ï¼Œå¹¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«")]),s._v(" "),t("p",[s._v("å·®å¼‚æ— é")]),s._v(" "),t("ul",[t("li",[s._v("ä¾èµ–ä¸åŒ")]),s._v(" "),t("li",[s._v("æœåŠ¡åœ°å€ä¸åŒ")])]),s._v(" "),t("p",[s._v("å…·ä½“è€Œè¨€ï¼Œæ¯ä¸ªå¾®æœåŠ¡é€šè¿‡è¿™æ ·çš„æ–¹å¼é›†ä¸­ç®¡ç†")]),s._v(" "),t("p",[s._v("1ï¸âƒ£ é¦–å…ˆå¼•å…¥ Nacos å®¢æˆ·ç«¯ä¾èµ–å¹¶è¿›è¡Œé…ç½®")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.alibaba.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-alibaba-nacos-discovery"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2022.0.0.0"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- æ ¹æ® Spring Cloud ç‰ˆæœ¬é€‰æ‹© --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("discovery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Nacos æœåŠ¡å™¨åœ°å€")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" public           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å‘½åç©ºé—´ï¼ˆé»˜è®¤ publicï¼‰")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("group")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" DEFAULT_GROUP        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ†ç»„ï¼ˆé»˜è®¤ DEFAULT_GROUPï¼‰")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("2ï¸âƒ£ åœ¨ä¸»ç±»ä¸­å¯åŠ¨ Nacos æ³¨å†ŒæœåŠ¡")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("userservice")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("boot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringApplication")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("boot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("autoconfigure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBootApplication")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cloud"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("discovery"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EnableDiscoveryClient")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SpringBootApplication")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@EnableDiscoveryClient")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯ç”¨æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆå…¼å®¹ Nacosï¼‰")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserServiceApplication")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringApplication")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserServiceApplication")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("3ï¸âƒ£ æ­£å¸¸ç¼–å†™"),t("code",[s._v("Controller")]),s._v("å±‚ä»£ç ï¼Œå¦‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/users"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserController")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" userMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºç”¨æˆ·")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PostMapping")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestBody")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        userMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŸ¥è¯¢ç”¨æˆ·")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/{id}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" userMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("å¦‚æ­¤ï¼Œå½“å‰é¡¹ç›®"),t("code",[s._v("user-service")]),s._v("çš„æ¥å£å°±è¢«æ³¨å†Œåœ¨åœ°å€ä¸º"),t("code",[s._v("localhost:8848")]),s._v("çš„ Nacos ä¸­ï¼Œå…¶ä»–æ¨¡å—å¯ä»¥é€šè¿‡ Feign å®¢æˆ·ç«¯å¯¹è¯¥æ¥å£è¿›è¡Œè°ƒç”¨")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@FeignClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user-service"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æœåŠ¡åéœ€ä¸ç›®æ ‡æœåŠ¡åœ¨ Nacos ä¸­çš„åç§°ä¸€è‡´")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserServiceClient")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/{id}}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserById")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"feign"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#feign"}},[s._v("#")]),s._v(" Feign")]),s._v(" "),t("blockquote",[t("p",[s._v("SpringCloud OpenFeignï¼Œæœ¬è´¨ä¸Šæ˜¯ RestTemplate çš„ä¸Šä½æ›¿ä»£ï¼Œå°è£…äº† HTTP è¯·æ±‚åœ¨å„å¾®æœåŠ¡æ¥å£ä¹‹é—´è¿›è¡Œè°ƒç”¨ï¼Œå±åŒæ­¥è°ƒç”¨ï¼Œä¸å±äº RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰")])]),s._v(" "),t("p",[s._v("åˆšåˆšç®€å•å±•ç¤ºäº†è°ƒç”¨ user-service çš„ Feign å®¢æˆ·ç«¯ç¼–å†™ï¼Œä»¥ä¸‹å¼•å…¥å¦ä¸€ä¸ªæ¨¡å— order-service æ¥æ›´æ¸…æ™°çš„å±•ç¤ºè°ƒç”¨è¿‡ç¨‹")]),s._v(" "),t("p",[s._v("ä»¥åŒæ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª order-service æ¨¡å—è¿è¡Œåœ¨ 8082 ç«¯å£ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¢å•æŸ¥è¯¢æ¥å£æ³¨å†Œåˆ° Nacos")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" order"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("discovery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Nacos æœåŠ¡å™¨åœ°å€")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" public           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å‘½åç©ºé—´ï¼ˆé»˜è®¤ publicï¼‰")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("group")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" DEFAULT_GROUP        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ†ç»„ï¼ˆé»˜è®¤ DEFAULT_GROUPï¼‰")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/orders"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OrderController")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŸ¥è¯¢ç”¨æˆ·è´¦å•")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/{userId}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOrders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OrderService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOrdersByUserId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("ä»¥ä¸‹å±•ç¤ºå¦‚ä½•åœ¨ user-service æ¨¡å—ä¸­è°ƒç”¨ä¸Šé¢æ³¨å†Œåˆ° Nacos çš„ order-service æœåŠ¡")]),s._v(" "),t("p",[s._v("1ï¸âƒ£ å¼•å…¥ Feign ä¾èµ–å¹¶åœ¨ä¸»ç±»ä¸­å¯ç”¨ï¼ˆåœ¨ UserService æ¨¡å—ä¸­ï¼‰")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-openfeign"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SpringBootApplication")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@EnableDiscoveryClient")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@EnableFeignClients")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯ç”¨ Feign å®¢æˆ·ç«¯")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserServiceApplication")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("3ï¸âƒ£ ç¼–å†™ Feign å®¢æˆ·ç«¯è°ƒç”¨ä¸Šé¢ order-service çš„æœåŠ¡")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@FeignClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"order-service"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æœåŠ¡åéœ€ä¸ç›®æ ‡æœåŠ¡åœ¨ Nacos ä¸­çš„åç§°ä¸€è‡´")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OrderServiceClient")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/orders/{userId}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOrdersByUserId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("4ï¸âƒ£ åœ¨ Controller å±‚è°ƒç”¨ Feign å®¢æˆ·ç«¯")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/users"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserController")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OrderServiceClient")]),s._v(" orderServiceClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/{id}/orders"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserOrders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" orderServiceClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOrdersByUserId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("å¦‚æ­¤ä¾¿å®ç°äº†å¾®æœåŠ¡ä¹‹é—´çš„ä¸€æ¬¡ç®€å•çš„è°ƒç”¨ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œä»–è¯·æ±‚çš„å®é™…ä¸Šæ˜¯"),t("code",[s._v("/users/{id}/orders")]),s._v("æ¥å£ï¼Œåœ¨å¾®æœåŠ¡å†…éƒ¨ï¼Œè¿™ä¸ªè¯·æ±‚è¢«è½¬å‘åˆ°"),t("code",[s._v("/orders/{id}")]),s._v("æ¥å£ï¼Œå¹¶æœ€ç»ˆå°†ç»“æœé€šè¿‡"),t("code",[s._v("/users/{id}/orders")]),s._v("è¿”å›")]),s._v(" "),t("h3",{attrs:{id:"gateway"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gateway"}},[s._v("#")]),s._v(" Gateway")]),s._v(" "),t("p",[s._v("Gateway ç½‘å…³æ˜¯å¾®æœåŠ¡çš„é—¨ç¥ï¼Œè´Ÿè´£")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æƒé™æ§åˆ¶")]),s._v("ï¼šç½‘å…³ä½œä¸ºå¾®æœåŠ¡å…¥å£ï¼Œéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯æ˜¯å¦æœ‰è¯·æ±‚èµ„æ ¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ‹¦æˆª")]),s._v(" "),t("li",[t("strong",[s._v("è·¯ç”±å’Œè´Ÿè½½å‡è¡¡")]),s._v("ï¼šä¸€åˆ‡è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡gatewayï¼Œä½†ç½‘å…³ä¸å¤„ç†ä¸šåŠ¡ï¼Œè€Œæ˜¯æ ¹æ®æŸç§è§„åˆ™ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°æŸä¸ªå¾®æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè·¯ç”±ã€‚å½“ç„¶è·¯ç”±çš„ç›®æ ‡æœåŠ¡æœ‰å¤šä¸ªæ—¶ï¼Œè¿˜éœ€è¦åšè´Ÿè½½å‡è¡¡")]),s._v(" "),t("li",[t("strong",[s._v("é™æµ")]),s._v("ï¼šå½“è¯·æ±‚æµé‡è¿‡é«˜æ—¶ï¼Œåœ¨ç½‘å…³ä¸­æŒ‰ç…§ä¸‹æµçš„å¾®æœåŠ¡èƒ½å¤Ÿæ¥å—çš„é€Ÿåº¦æ¥æ”¾è¡Œè¯·æ±‚ï¼Œé¿å…æœåŠ¡å‹åŠ›è¿‡å¤§")])]),s._v(" "),t("p",[s._v("åŸºæœ¬æ¶æ„")]),s._v(" "),t("img",{attrs:{src:a(718)}}),s._v(" "),t("p",[t("strong",[s._v("å®é™…ä¸Šï¼Œåœ¨ç°å®ä¸šåŠ¡ä¸­ï¼Œè¯·æ±‚å…ˆèµ°è´Ÿè½½å‡è¡¡ï¼Œå†æ‰“ç½‘å…³ï¼Œæœ€åæ‰“åˆ°å¾®æœåŠ¡")])]),s._v(" "),t("p",[s._v("maven å¼•å…¥")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--ç½‘å…³--\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-gateway"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--nacosæœåŠ¡å‘ç°ä¾èµ– è‡ªå·±ä¹Ÿè¦æ³¨å†Œåˆ°nacos--\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.alibaba.cloud"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-alibaba-nacos-discovery"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("application é…ç½®")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10010")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç½‘å…³ç«¯å£")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" gateway "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æœåŠ¡åç§°")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server-addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nacosåœ°å€")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("gateway")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç½‘å…³è·¯ç”±é…ç½®")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" order"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//orderservice\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/user/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" After=2021"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("01"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("20T17"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("42"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("47.789"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("07"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("00"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("America/Denver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ–­è¨€ï¼šåªæœ‰åœ¨è¿™ä¸ªäº‹ä»¶åå‘é€çš„è¯·æ±‚æ‰å¯ä»¥")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uri: http://127.0.0.1:8081 # è·¯ç”±çš„ç›®æ ‡åœ°å€ httpå°±æ˜¯å›ºå®šåœ°å€")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//userservice "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·¯ç”±çš„ç›®æ ‡åœ°å€ lbå°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§°")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·¯ç”±æ–­è¨€ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/user/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿™ä¸ªæ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿‡æ»¤å™¨ï¼ˆå½“å‰è¿‡æ»¤å™¨å†™åœ¨userserviceè·¯ç”±ä¸‹ï¼Œå› æ­¤ä»…ä»…å¯¹è®¿é—®userserviceçš„è¯·æ±‚æœ‰æ•ˆï¼‰")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" AddRequestHeader=Conan"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isMe"),t("span",{pre:!0,attrs:{class:"token tag"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ·»åŠ è¯·æ±‚å¤´")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("default-filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é»˜è®¤è¿‡æ»¤é¡¹ï¼ˆå¯¹æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ•ˆï¼‰")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" AddRequestHeader=Truth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Itcast is freaking awesome"),t("span",{pre:!0,attrs:{class:"token tag"}},[s._v("!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("æœ‰ä¸€ä¸ªé—®é¢˜ï¼šGateway çš„æƒé™æ‹¦æˆªå’Œ SpringSecurity æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œèƒ½å¦ç›¸äº’æ›¿ä»£ï¼Ÿ")]),s._v(" "),t("h2",{attrs:{id:"rpc-æ¡†æ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rpc-æ¡†æ¶"}},[s._v("#")]),s._v(" RPC æ¡†æ¶")]),s._v(" "),t("p",[s._v("RPCï¼ˆRemote Procedure Callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰æ˜¯ä¸€ç§"),t("strong",[s._v("å…è®¸åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸åŒæœåŠ¡åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡")]),s._v("çš„æŠ€æœ¯ã€‚RPC æ¡†æ¶å°è£…äº†åº•å±‚çš„ç½‘ç»œé€šä¿¡ã€åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä½¿å¼€å‘è€…å¯ä»¥é€æ˜åœ°è¿›è¡Œè¿œç¨‹è°ƒç”¨ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†å¤æ‚çš„ç½‘ç»œç¼–ç¨‹")]),s._v(" "),t("h3",{attrs:{id:"why-rpc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#why-rpc"}},[s._v("#")]),s._v(" Why RPC?")]),s._v(" "),t("p",[s._v("åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸åŒçš„æœåŠ¡å¯èƒ½éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå®ƒä»¬éœ€è¦ç›¸äº’é€šä¿¡ã€‚ä¾‹å¦‚")]),s._v(" "),t("ul",[t("li",[s._v("ç”µå•†ç³»ç»Ÿï¼šè®¢å•æœåŠ¡éœ€è¦è°ƒç”¨åº“å­˜æœåŠ¡æ£€æŸ¥åº“å­˜ï¼Œå†è°ƒç”¨æ”¯ä»˜æœåŠ¡å¤„ç†æ”¯ä»˜")]),s._v(" "),t("li",[s._v("å¾®æœåŠ¡æ¶æ„ï¼šå¤šä¸ªå¾®æœåŠ¡ä¹‹é—´éœ€è¦ç›¸äº’è°ƒç”¨ï¼Œæ¯”å¦‚ç”¨æˆ·è®¤è¯æœåŠ¡ã€è®¢å•æœåŠ¡ã€å•†å“æœåŠ¡ç­‰")])]),s._v(" "),t("p",[s._v("å®ƒå¯¹æ ‡çš„æ˜¯ "),t("strong",[s._v("HTTP/REST")]),s._v(" é€šä¿¡ï¼Œæˆ‘ä»¬å½“ç„¶å¯ä»¥ç›´æ¥é€šè¿‡æ‰“è¯·æ±‚çš„æ–¹å¼è·å–æ•°æ®ï¼Œä¾‹å¦‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v(" restTemplate "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getForObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://server/user?id=1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("å½“ç„¶äº†ï¼Œè¿™æ˜¯åŸå§‹çš„å®ç°æ–¹å¼ï¼ŒSpring Cloud æä¾›æœ‰ä¼˜é›…çš„ä¸Šä½ä»£æ›¿ â€”â€” Feignï¼Œä½†ä»–ä»ç„¶æ˜¯é€šè¿‡ HTTP å®ç°çš„æœåŠ¡é€šä¿¡")]),s._v(" "),t("p",[s._v("åªè¦æ˜¯åŸºäº HTTPï¼Œå°±ä¼šå­˜åœ¨")]),s._v(" "),t("ul",[t("li",[s._v("è¯·æ±‚ä½“è¾ƒå¤§ï¼ˆHTTP è¯·æ±‚å¤´ã€JSON åºåˆ—åŒ–ç­‰ï¼‰")]),s._v(" "),t("li",[s._v("æ€§èƒ½æŸè€—ï¼ˆHTTP éœ€è¦è§£ææ–‡æœ¬ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å¼€é”€å¤§ï¼‰")]),s._v(" "),t("li",[s._v("åè®®ä¸å¤Ÿé«˜æ•ˆï¼ˆHTTP æ˜¯åŸºäºæ–‡æœ¬çš„ï¼Œè€Œ RPC å¯ä»¥é‡‡ç”¨æ›´é«˜æ•ˆçš„äºŒè¿›åˆ¶åè®®ï¼‰")])]),s._v(" "),t("p",[s._v("è€Œ RPC è§£å†³äº†è¿™äº›é—®é¢˜")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ›´é«˜æ•ˆ")]),s._v("ï¼šä½¿ç”¨"),t("strong",[s._v("äºŒè¿›åˆ¶åè®®")]),s._v("ï¼ˆå¦‚ Protobufï¼‰ï¼Œå‡å°‘æ•°æ®ä¼ è¾“ä½“ç§¯")]),s._v(" "),t("li",[t("strong",[s._v("æ›´é€æ˜")]),s._v("ï¼šåƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡")]),s._v(" "),t("li",[t("strong",[s._v("æ›´æ˜“æ‰©å±•")]),s._v("ï¼šå†…ç½®"),t("strong",[s._v("è´Ÿè½½å‡è¡¡ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€æµé‡æ§åˆ¶")]),s._v("ç­‰åŠŸèƒ½")])]),s._v(" "),t("h3",{attrs:{id:"å·¥ä½œåŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å·¥ä½œåŸç†"}},[s._v("#")]),s._v(" å·¥ä½œåŸç†")]),s._v(" "),t("p",[s._v("RPC æ¡†æ¶ä¸»è¦åŒ…å«"),t("strong",[s._v("å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯ã€æ³¨å†Œä¸­å¿ƒ")]),s._v("ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶")]),s._v(" "),t("ol",[t("li",[s._v("å®¢æˆ·ç«¯ï¼ˆClient Stubï¼‰\n"),t("ul",[t("li",[s._v("å‘é€è¯·æ±‚ç»™æœåŠ¡ç«¯ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·")]),s._v(" "),t("li",[s._v("è´Ÿè´£åºåˆ—åŒ–è¯·æ±‚æ•°æ®ï¼ˆå°† Java å¯¹è±¡è½¬æ¢æˆå­—èŠ‚æµï¼‰")])])]),s._v(" "),t("li",[s._v("æœåŠ¡ç«¯ï¼ˆServer Stubï¼‰\n"),t("ul",[t("li",[s._v("ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè°ƒç”¨å¯¹åº”çš„æœ¬åœ°æ–¹æ³•ï¼Œå¹¶è¿”å›ç»“æœ")]),s._v(" "),t("li",[s._v("è´Ÿè´£ååºåˆ—åŒ–è¯·æ±‚æ•°æ®ï¼ˆå°†å­—èŠ‚æµè½¬æ¢æˆ Java å¯¹è±¡ï¼‰")])])]),s._v(" "),t("li",[s._v("æ³¨å†Œä¸­å¿ƒï¼ˆService Registryï¼‰\n"),t("ul",[t("li",[s._v("ç»´æŠ¤æ‰€æœ‰å¯ç”¨çš„æœåŠ¡åˆ—è¡¨")]),s._v(" "),t("li",[s._v("å®¢æˆ·ç«¯åœ¨è°ƒç”¨æ—¶"),t("strong",[s._v("åŠ¨æ€å‘ç°æœåŠ¡")]),s._v("ï¼Œè€Œä¸æ˜¯å†™æ­» IP åœ°å€")]),s._v(" "),t("li",[s._v("å¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒï¼šZookeeperã€Nacos")])])])]),s._v(" "),t("p",[s._v("RPC å…¸å‹æµç¨‹")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1ï¸âƒ£ å®¢æˆ·ç«¯è°ƒç”¨æœ¬åœ°æ–¹æ³•ï¼ˆä¼ªè£…æˆæ™®é€šçš„ Java æ–¹æ³•ï¼‰\n2ï¸âƒ£ RPC æ¡†æ¶å°†è¯·æ±‚æ•°æ®åºåˆ—åŒ–å¹¶å‘é€åˆ°æœåŠ¡ç«¯\n3ï¸âƒ£ æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚ï¼Œååºåˆ—åŒ–æ•°æ®ï¼Œå¹¶è°ƒç”¨ç›®æ ‡æ–¹æ³•\n4ï¸âƒ£ ç›®æ ‡æ–¹æ³•æ‰§è¡Œåè¿”å›ç»“æœ\n5ï¸âƒ£ æœåŠ¡ç«¯å°†è¿”å›ç»“æœåºåˆ—åŒ–å¹¶å‘é€å›å®¢æˆ·ç«¯\n6ï¸âƒ£ å®¢æˆ·ç«¯æ¥æ”¶ç»“æœï¼Œè¿”å›ç»™è°ƒç”¨æ–¹\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("å¸¸è§ RPC æ¡†æ¶")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("RPC æ¡†æ¶")]),s._v(" "),t("th",[s._v("è¯­è¨€")]),s._v(" "),t("th",[s._v("ä¸»è¦ç‰¹ç‚¹")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("strong",[s._v("gRPC")])]),s._v(" "),t("td",[s._v("å¤šè¯­è¨€ï¼ˆJavaã€Goã€Pythonç­‰ï¼‰")]),s._v(" "),t("td",[s._v("Google å¼€å‘ï¼ŒåŸºäº HTTP/2 å’Œ Protobufï¼Œé«˜æ€§èƒ½ï¼Œæ”¯æŒæµå¼é€šä¿¡")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("Dubbo")])]),s._v(" "),t("td",[s._v("Java")]),s._v(" "),t("td",[s._v("é˜¿é‡Œå·´å·´å¼€å‘ï¼Œæ”¯æŒæœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€æµé‡æ§åˆ¶")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("Motan")])]),s._v(" "),t("td",[s._v("Java")]),s._v(" "),t("td",[s._v("ç¾å›¢å¼€æºï¼Œè½»é‡çº§ï¼Œé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("Thrift")])]),s._v(" "),t("td",[s._v("å¤šè¯­è¨€ï¼ˆJavaã€C++ã€Pythonç­‰ï¼‰")]),s._v(" "),t("td",[s._v("Facebook å¼€å‘ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼Œé€‚ç”¨äºè·¨è¯­è¨€ RPC")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("Tars")])]),s._v(" "),t("td",[s._v("å¤šè¯­è¨€ï¼ˆJavaã€C++ã€Goç­‰ï¼‰")]),s._v(" "),t("td",[s._v("è…¾è®¯å¼€æºï¼Œæ”¯æŒå¤§è§„æ¨¡åˆ†å¸ƒå¼åº”ç”¨")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("Hessian")])]),s._v(" "),t("td",[s._v("Java")]),s._v(" "),t("td",[s._v("ç®€å•æ˜“ç”¨ï¼Œé€‚ç”¨äºå°å‹åº”ç”¨ï¼Œåºåˆ—åŒ–é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼")])])])]),s._v(" "),t("h3",{attrs:{id:"dubbo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dubbo"}},[s._v("#")]),s._v(" Dubbo")]),s._v(" "),t("p",[s._v("Dubbo æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ Java RPC æ¡†æ¶ï¼ŒåŸºäº Netty å®ç°ï¼Œç”¨äºå¾®æœåŠ¡é—´é€šä¿¡ï¼Œä¸åŒ Feign çš„ HTTP é€šä¿¡ï¼ŒDubbo é‡‡ç”¨æ›´åŠ è½»é‡è¿…æ·çš„äºŒè¿›åˆ¶åè®®è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œæ•…è€Œæ•ˆç‡è¦è¿œé«˜äº Feign")]),s._v(" "),t("ul",[t("li",[s._v("å’Œ Feign ä¸€æ ·ï¼ŒDubbo ä¹Ÿæ˜¯åŒæ­¥è°ƒç”¨")])]),s._v(" "),t("p",[s._v("è°ƒç”¨æµç¨‹åŸºæœ¬ä¸€è‡´")]),s._v(" "),t("p",[t("strong",[s._v("ä»£ç ç¤ºä¾‹")])]),s._v(" "),t("p",[s._v("1ï¸âƒ£ æ·»åŠ ä¾èµ–")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.apache.dubbo"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("dubbo-spring-boot-starter"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2.7.8"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("2ï¸âƒ£ å®šä¹‰æ¥å£")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("3ï¸âƒ£ å®ç°æœåŠ¡ç«¯")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DubboService")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserServiceImpl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å¼ ä¸‰"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("4ï¸âƒ£ å®ç°å®¢æˆ·ç«¯")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DubboReference")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")]),s._v(" userService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("å½“ç„¶äº†ï¼Œåœ¨å®¢æˆ·ç«¯éœ€è¦å¯¹æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚ Nacosï¼‰åœ¨ application.yaml è¿›è¡Œé…ç½®ï¼Œè¿™æ ·åœ¨ç¢°åˆ°"),t("code",[s._v("@DubboReference")]),s._v("æ³¨è§£æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å»æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢éœ€è¦çš„æœåŠ¡åœ°å€")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dubbo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" consumer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®¢æˆ·ç«¯åº”ç”¨å")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("registry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nacos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//127.0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿™é‡Œé…ç½®çš„æ˜¯æ³¨å†Œä¸­å¿ƒçš„åœ°å€")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dubbo\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("-1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -1 è¡¨ç¤ºéšæœºç«¯å£")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("å…·ä½“è°ƒç”¨æµç¨‹æ˜¯")]),s._v(" "),t("ol",[t("li",[s._v("æœåŠ¡ç«¯ï¼ˆProviderï¼‰å¯åŠ¨æ—¶ï¼Œå®ƒä¼šæŠŠè‡ªå·±çš„æœåŠ¡ä¿¡æ¯ï¼ˆæ¥å£ã€åœ°å€ã€ç«¯å£ç­‰ï¼‰æ³¨å†Œåˆ° Nacos/Zookeeper")]),s._v(" "),t("li",[s._v("å®¢æˆ·ç«¯ï¼ˆConsumerï¼‰å¯åŠ¨æ—¶ï¼Œå®ƒä¼šå»"),t("strong",[s._v("æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢")]),s._v("éœ€è¦çš„æœåŠ¡åœ°å€")]),s._v(" "),t("li",[s._v("å½“ä»£ç è¿è¡Œåˆ° "),t("code",[s._v("@DubboReference")]),s._v(" æ—¶ï¼ŒDubbo ä»£ç†ä¼š"),t("strong",[s._v("æ ¹æ®æ³¨å†Œä¸­å¿ƒçš„ä¿¡æ¯æ‰¾åˆ°è¿œç¨‹æœåŠ¡")]),s._v("ï¼Œç„¶åå»ºç«‹è¿æ¥å¹¶æ‰§è¡Œè°ƒç”¨")])]),s._v(" "),t("p",[s._v("ğŸ’¡ "),t("strong",[s._v("å½“å°è¯•ä¿®æ”¹æœåŠ¡ç«¯çš„ IP åœ°å€æ—¶ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿè‡ªåŠ¨å‘ç°è¯·æ±‚åœ°å€å˜åŒ–ï¼Œè¿™æ˜¯æ³¨å†Œä¸­å¿ƒå®Œæˆçš„å·¥ä½œï¼Œå¯¹äº RPC å®¢æˆ·ç«¯æ˜¯å®Œå…¨é€æ˜çš„")]),s._v(" ğŸš€")]),s._v(" "),t("p",[s._v("å¦å¤–ï¼ŒDubbo å†…ç½®äº†"),t("strong",[s._v("è´Ÿè½½å‡è¡¡ã€é‡è¯•æœºåˆ¶ã€è¶…æ—¶æ§åˆ¶")]),s._v("çš„åŠŸèƒ½ï¼Œå‡å¯ä»¥åœ¨ application.yaml ä¸­è¿›è¡Œé…ç½®")]),s._v(" "),t("h3",{attrs:{id:"zookeeper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper"}},[s._v("#")]),s._v(" Zookeeper")]),s._v(" "),t("p",[s._v("ä¸ Nacos åŒå±äºæ³¨å†Œä¸­å¿ƒï¼ŒNacos ç”±é˜¿é‡Œå¼€å‘")]),s._v(" "),t("ul",[t("li",[s._v("Nacos å’Œ Zookeeper çš„å¼‚åŒï¼Ÿ")])]),s._v(" "),t("h2",{attrs:{id:"ç´¢å¼•ä¸äº‹åŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç´¢å¼•ä¸äº‹åŠ¡"}},[s._v("#")]),s._v(" ç´¢å¼•ä¸äº‹åŠ¡")]),s._v(" "),t("h3",{attrs:{id:"ç´¢å¼•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç´¢å¼•"}},[s._v("#")]),s._v(" ç´¢å¼•")]),s._v(" "),t("p",[s._v("åœ¨ MySQL å»ºè¡¨æ˜¯ï¼Œä¼šå¯¹ä¸»é”®ï¼ˆprimary keyï¼‰è‡ªåŠ¨æ·»åŠ ç´¢å¼•ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªé¢å¤–çš„å­˜å‚¨ä¸»é”®æœ‰åºæ•°æ®ç»“æ„ï¼Œé‡‡ç”¨ç±»ä¼¼äºŒåˆ†æœç´¢çš„å¿«é€Ÿè§„æ¨¡å‹ç¼©ç®—æ³•å¯¹ä¸»é”®è¿›è¡Œæ£€ç´¢ï¼ˆå®é™…ä¸Šæ˜¯ä¸€æ£µ B+ æ ‘ï¼‰")]),s._v(" "),t("p",[s._v("è¿™æ˜¯ B æ ‘ï¼šéœ€è¦ä¿è¯å¶å­ç»“ç‚¹éƒ½åœ¨åŒä¸€å±‚")]),s._v(" "),t("img",{attrs:{src:a(719)}}),s._v(" "),t("p",[s._v("B+ æ ‘åœ¨ B æ ‘çš„åŸºç¡€ä¸Š")]),s._v(" "),t("ul",[t("li",[s._v("æŠŠæ‰€æœ‰çš„å…³é”®å­—éƒ½æ”¾åœ¨æœ€åä¸€å±‚ï¼ˆå¶å­å±‚ï¼‰ï¼Œæ‰€æœ‰éå¶å­ç»“ç‚¹éƒ½æ˜¯â€œç´¢å¼•â€")]),s._v(" "),t("li",[s._v("åœ¨å¶å­ç»“ç‚¹é‚£å±‚åŠ äº†ä¸€ä¸ªé“¾æŒ‡é’ˆæŠŠå¶å­å±‚è¿æ¥åœ¨ä¸€èµ·ï¼Œå¯ä»¥é¿å…å½“æ ‘è§„æ¨¡è¿‡å¤§æ—¶ï¼Œæœç´¢æ•ˆç‡é™ä½")])]),s._v(" "),t("img",{attrs:{src:a(720)}}),s._v(" "),t("h3",{attrs:{id:"äº‹åŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡"}},[s._v("#")]),s._v(" äº‹åŠ¡")]),s._v(" "),t("p",[s._v("åœ¨ Spring ä¸­ï¼Œå¯ç”¨"),t("code",[s._v("@Transactional")]),s._v(" å£°æ˜äº‹åŠ¡ï¼Œå®ƒæå¤§åœ°ç®€åŒ–äº†äº‹åŠ¡ç®¡ç†ï¼Œç›´æ¥åœ¨ Service å±‚å¯¹åº”çš„æ–¹æ³•ä¸Šè¿›è¡Œæ³¨è§£ï¼Œå³å¯å®Œæˆä¸€æ¬¡äº‹åŠ¡çš„ç¼–å†™")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Deprecated")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doWithdrawal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TransactionDTO")]),s._v(" transactionDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" accountMapper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("updateBalanceById")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("transactionDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMyAccount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" transactionDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAmount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("negate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("transactionDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),s._v(" transaction "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("transactionDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMyAccount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0L")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              transactionDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å¤–éƒ¨è´¦æˆ·"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              transactionDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAmount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ç”¨æˆ·å–æ¬¾"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" transactionMapper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertTransaction")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("transaction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("ä½†åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸€äº›å…³é”®ç‚¹ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´äº‹åŠ¡å¤±æ•ˆæˆ–å‡ºç°æ„å¤–è¡Œä¸º")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("@Transactional")]),s._v(" åªèƒ½ä¿®é¥° public æ–¹æ³•")]),s._v(" "),t("li",[t("code",[s._v("@Transactional")]),s._v(" ä¸èƒ½è‡ªèº«è°ƒç”¨ï¼Œæ¯”å¦‚æ–¹æ³• A å’Œ B éƒ½åœ¨ UserService ç±»ä¸­ï¼Œå¦‚æœåœ¨ A ä¸­è°ƒç”¨ B æ–¹æ³•ï¼Œå³ä½¿ B æ–¹æ³•æœ‰"),t("code",[s._v("@Transactional")]),s._v(" ä¿®é¥°ï¼Œè¿™ä¸ªäº‹åŠ¡ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¿™å’Œ Java çš„åŠ¨æ€ä»£ç†æœºåˆ¶æœ‰å…³")])]),s._v(" "),t("p",[s._v("è®¾ç½®è¶…æ—¶ï¼ˆtimeoutï¼‰ï¼šè®¾ç½®äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œè¶…è¿‡æ—¶é—´æœªå®Œæˆåˆ™å›æ»š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("timeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("methodC")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// äº‹åŠ¡è¶…æ—¶æ—¶é—´ä¸º 5 ç§’")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("åªè¯»ï¼ˆreadOnlyï¼‰ï¼šæ ‡è®°äº‹åŠ¡ä¸ºåªè¯»ï¼Œä¼˜åŒ–æ•°æ®åº“æ€§èƒ½ï¼ˆå¦‚ MySQL çš„åªè¯»äº‹åŠ¡ä¼šç¦ç”¨å†™é”ï¼‰")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ³¨æ„")]),s._v("ï¼šåªè¯»äº‹åŠ¡ä¸­ä¸èƒ½æ‰§è¡Œå†™æ“ä½œï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("readOnly "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("methodD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åªè¯»äº‹åŠ¡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("äº‹åŠ¡å›æ»šè§„åˆ™ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ"),t("code",[s._v("@Transactional")]),s._v(" å›æ»šçš„æ˜¯ RunTimeExceptionï¼Œå¦‚æœéœ€è¦ç‰¹æ®Šè¦æ±‚ï¼Œéœ€è¦æŒ‡å®š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å›æ»š I/O å’Œ SQL å¼‚å¸¸")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rollbackFor "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SQLException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸å›æ»šç©ºæŒ‡é’ˆå¼‚å¸¸")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("noRollbackFor "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NullPointerException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("code",[s._v("@Transactional")]),s._v(" çš„ "),t("code",[s._v("isolation")]),s._v(" å±æ€§ç”¨äºå®šä¹‰äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œå¸¸è§çš„éš”ç¦»çº§åˆ«å¦‚ä¸‹")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("éš”ç¦»çº§åˆ«")]),s._v(" "),t("th",[s._v("é˜²æ­¢è„è¯»")]),s._v(" "),t("th",[s._v("é˜²æ­¢ä¸å¯é‡å¤è¯»")]),s._v(" "),t("th",[s._v("é˜²æ­¢å¹»è¯»")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("strong",[s._v("read uncommitted")])]),s._v(" "),t("td",[s._v("âœ—")]),s._v(" "),t("td",[s._v("âœ—")]),s._v(" "),t("td",[s._v("âœ—")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("read committed")])]),s._v(" "),t("td",[s._v("âœ“")]),s._v(" "),t("td",[s._v("âœ—")]),s._v(" "),t("td",[s._v("âœ—")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("repeatable read")]),s._v(" (MySQL é»˜è®¤)")]),s._v(" "),t("td",[s._v("âœ“")]),s._v(" "),t("td",[s._v("âœ“")]),s._v(" "),t("td",[s._v("éƒ¨åˆ† âœ“ï¼ˆé—´éš™é”ï¼‰")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("serializable")])]),s._v(" "),t("td",[s._v("âœ“")]),s._v(" "),t("td",[s._v("âœ“")]),s._v(" "),t("td",[s._v("âœ“")])])])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("isolation "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Isolation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("REPEATABLE_READ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("methodB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹æ‰§è¡Œ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("ä»€ä¹ˆæ˜¯è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ï¼Ÿ")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("è„è¯»ï¼šè¯»åˆ°äº†å†™è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®")]),s._v(" "),t("p",[s._v("è§£å†³åŠæ³•ï¼šç»™å†™åŠ é”ï¼Œå†™æ—¶ä¸èƒ½è¯»")])]),s._v(" "),t("li",[t("p",[s._v("ä¸å¯é‡å¤è¯»ï¼šå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå‰åé‡å¤è¯»åŒä¸€æ•°æ®ï¼Œæ•°æ®å­˜åœ¨æ”¹å˜")]),s._v(" "),t("p",[s._v("åŸå› ï¼šè¯»æ—¶å¯å†™ â€”> è§£å†³åŠæ³•ï¼šç»™è¯»åŠ é”")])]),s._v(" "),t("li",[t("p",[s._v("å¹»è¯»ï¼šé’ˆå¯¹å¤šæ•°æ®ï¼Œä¹‹å‰ç»™è¯»/å†™éƒ½åŠ äº†é”ï¼Œä½†é‚£ä¸ªé”æ˜¯ä½œç”¨äºå•ä¸ªæ•°æ®çš„ï¼Œå³å•ä¸ªæ•°æ®é¡¹æœ‰è¯»/å†™é”ä»è€Œé˜²æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å­˜åœ¨å¤šæŸ¥è¯¢çš„æƒ…å†µï¼Œæ¯”å¦‚"),t("code",[s._v("count(*)")]),s._v("æ“ä½œï¼Œå³ä½¿æ•°æ®é¡¹ a åœ¨è¢«å†™ï¼Œæ•°æ®é¡¹ b åœ¨è¢«è¯»ï¼Œä½†ä¸å½±å“æ•°æ® c è¢«æ’å…¥æ•°æ®è¡¨ï¼Œé‚£ä¹ˆåŒä¸€äº‹åŠ¡çš„å‰åä¸¤æ¬¡"),t("code",[s._v("count(*)")]),s._v("å°±æœ‰å¯èƒ½è¿”å›ä¸ä¸€æ ·çš„ç»“æœï¼ˆ2 å’Œ 3ï¼‰ï¼Œè¿™å°±å«å¹»è¯»")]),s._v(" "),t("p",[s._v("è§£å†³æ–¹æ³•ï¼šå¯¹æ•´ä¸ªæ•°æ®è¡¨åŠ è¯»å†™é”ï¼Œå½»åº•ä¸²è¡Œæ‰§è¡Œï¼Œæ•ˆç‡æä½")])])]),s._v(" "),t("h3",{attrs:{id:"seata"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#seata"}},[s._v("#")]),s._v(" Seata")]),s._v(" "),t("h2",{attrs:{id:"é™çº§ã€ç†”æ–­å’Œé™æµ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™çº§ã€ç†”æ–­å’Œé™æµ"}},[s._v("#")]),s._v(" é™çº§ã€ç†”æ–­å’Œé™æµ")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯é™çº§ã€ç†”æ–­å’Œé™æµ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯é™çº§ã€ç†”æ–­å’Œé™æµ"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯é™çº§ã€ç†”æ–­å’Œé™æµ")]),s._v(" "),t("p",[s._v("é™çº§ï¼šæœåŠ¡ç«¯å‡ºç°é—®é¢˜ï¼Œå®¢æˆ·ç«¯é™çº§ä½¿ç”¨ FallbackMethod æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå‹å¥½çš„æç¤ºï¼Œè€Œä¸è‡³äºå¿™ç­‰")]),s._v(" "),t("p",[s._v("ç†”æ–­ï¼šè¾¾åˆ°ä¸€å®šæ¡ä»¶åï¼ˆæ¯”å¦‚è¯·æ±‚æ•…éšœç‡è¾¾åˆ° 60%ï¼‰ï¼Œä¸€ç›´é™çº§ï¼Œç¼“æ…¢æ¢å¤")]),s._v(" "),t("p",[s._v("é™æµï¼šæ¯”å¦‚ç‚¹å¯¹ç‚¹æ¶ˆæ¯é˜Ÿåˆ—ç¼“æ…¢æ¶ˆè´¹è¯·æ±‚ï¼Œå¤§å®¶"),t("strong",[s._v("æ’é˜Ÿ")]),s._v("ï¼Œä¸€ç§’é’Ÿ N ä¸ªï¼Œæœ‰åºè¿›è¡Œï¼Œç§’æ€é«˜å¹¶å‘ç­‰æ“ä½œï¼Œä¸¥ç¦ä¸€çªèœ‚çš„è¿‡æ¥æ‹¥æŒ¤")]),s._v(" "),t("h3",{attrs:{id:"ç†”æ–­å®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç†”æ–­å®ç°"}},[s._v("#")]),s._v(" ç†”æ–­å®ç°")]),s._v(" "),t("blockquote",[t("p",[s._v("ä»¥å‰æ˜¯ Hystrixï¼Œç°åœ¨ç”¨ Resilience4J æˆ–è€… "),t("strong",[s._v("Sentinel")])])]),s._v(" "),t("p",[s._v("ç†”æ–­ï¼ˆCircuit Breakerï¼‰å’Œé™æµï¼ˆRate Limitingï¼‰æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­"),t("strong",[s._v("ä¿éšœæœåŠ¡é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§")]),s._v("çš„é‡è¦æ‰‹æ®µï¼Œä¸»è¦ç”¨äº"),t("strong",[s._v("é˜²æ­¢é›ªå´©æ•ˆåº”")]),s._v("ï¼Œç¡®ä¿åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ç³»ç»Ÿèƒ½å¹³ç¨³è¿è¡Œ")]),s._v(" "),t("ul",[t("li",[s._v("ç†”æ–­ï¼ˆCircuit Breakerï¼‰ç±»ä¼¼äº"),t("strong",[s._v("å®¶é‡Œçš„ç”µè·¯ä¿é™©ä¸")]),s._v("ï¼Œå½“ç”µæµè¿‡å¤§æ—¶ï¼Œä¿é™©ä¸ä¼šæ–­å¼€ç”µè·¯ï¼Œä»¥é˜²ç”µå™¨æŸåã€‚åœ¨"),t("strong",[s._v("åˆ†å¸ƒå¼ç³»ç»Ÿ")]),s._v("ä¸­ï¼Œç†”æ–­æœºåˆ¶ç”¨äº"),t("strong",[s._v("æ£€æµ‹æœåŠ¡æ˜¯å¦æ•…éšœï¼Œå¹¶åœ¨æ•…éšœä¸¥é‡æ—¶è‡ªåŠ¨é˜»æ­¢è¯·æ±‚ï¼Œä»¥é˜²æ­¢ç³»ç»Ÿå´©æºƒ")])])]),s._v(" "),t("p",[s._v("ç†”æ–­å™¨é€šå¸¸æœ‰ä»¥ä¸‹"),t("strong",[s._v("ä¸‰ç§çŠ¶æ€")])]),s._v(" "),t("ol",[t("li",[s._v("å…³é—­ï¼ˆClosedï¼‰ï¼šæœåŠ¡æ­£å¸¸è¿è¡Œï¼Œè¯·æ±‚å¯ä»¥è‡ªç”±é€šè¿‡")]),s._v(" "),t("li",[s._v("æ‰“å¼€ï¼ˆOpenï¼‰ï¼šå½“é”™è¯¯ç‡è¾¾åˆ°é˜ˆå€¼ï¼Œç†”æ–­å™¨æ‰“å¼€ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«æ‹’ç»ï¼Œé˜²æ­¢ç³»ç»Ÿç»§ç»­å´©æºƒ")]),s._v(" "),t("li",[s._v("åŠå¼€ï¼ˆHalf-Openï¼‰ï¼šç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œç³»ç»Ÿå°è¯•æ”¾è¡Œéƒ¨åˆ†è¯·æ±‚è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœæ¢å¤æ­£å¸¸ï¼Œç†”æ–­å™¨å…³é—­ï¼Œå¦åˆ™ä¿æŒæ‰“å¼€çŠ¶æ€")])]),s._v(" "),t("p",[s._v("Spring Cloud ä»¥å‰ä½¿ç”¨ "),t("strong",[s._v("Hystrix")]),s._v(" ä½œä¸ºç†”æ–­ç»„ä»¶ï¼Œä½†ç°åœ¨æ¨èä½¿ç”¨ "),t("strong",[s._v("Resilience4J")])]),s._v(" "),t("p",[t("strong",[s._v("1ï¸âƒ£ æ·»åŠ ä¾èµ–")])]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("io.github.resilience4j"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("resilience4j-spring-boot2"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("1.7.1"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("2ï¸âƒ£ ä»£ç ç¤ºä¾‹")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@CircuitBreaker")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"paymentService"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" fallbackMethod "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fallbackPayment"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("callPaymentService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨è¿œç¨‹æ”¯ä»˜æœåŠ¡")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" restTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getForObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://payment-service/pay"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç†”æ–­åçš„é™çº§æ–¹æ³•")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fallbackPayment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ”¯ä»˜æœåŠ¡ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[t("strong",[s._v("3ï¸âƒ£ é…ç½®ç†”æ–­é˜ˆå€¼")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resilience4j.circuitbreaker")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("instances")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("paymentService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("failureRateThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¤±è´¥ç‡è¾¾åˆ° 50% æ—¶è§¦å‘ç†”æ–­")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("waitDurationInOpenState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5000ms  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç†”æ–­å 5 ç§’å†å°è¯•æ¢å¤")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("permittedNumberOfCallsInHalfOpenState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠå¼€çŠ¶æ€æ—¶å…è®¸ 3 ä¸ªè¯·æ±‚è¿›è¡Œå°è¯•")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("ğŸ‘‰ è¿™æ ·ï¼Œå½“æ”¯ä»˜æœåŠ¡å¤±è´¥ç‡è¶…è¿‡ 50% æ—¶ï¼Œè¯·æ±‚ä¼šè‡ªåŠ¨èµ° "),t("code",[s._v("fallbackPayment")]),s._v(" æ–¹æ³•ï¼Œè€Œä¸ä¼šç»§ç»­å°è¯•è®¿é—®å·²æ•…éšœçš„æ”¯ä»˜æœåŠ¡")]),s._v(" "),t("h3",{attrs:{id:"é™æµå®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™æµå®ç°"}},[s._v("#")]),s._v(" é™æµå®ç°")]),s._v(" "),t("blockquote",[t("p",[s._v("SpringCloud Gateway")])]),s._v(" "),t("p",[s._v("é™æµï¼ˆRate Limitingï¼‰æ˜¯ä¸€ç§"),t("strong",[s._v("é™åˆ¶è¯·æ±‚é€Ÿç‡")]),s._v("çš„æŠ€æœ¯ï¼Œé˜²æ­¢å•ä¸ªæœåŠ¡è¢«è¿‡é‡è¯·æ±‚æ‹–å®ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿå¹³ç¨³è¿è¡Œ")]),s._v(" "),t("p",[s._v("ä¸ºä»€ä¹ˆéœ€è¦é™æµï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("é˜²æ­¢æµé‡æš´å¢å¯¼è‡´ç³»ç»Ÿå´©æºƒï¼ˆå¦‚åŒåä¸€è´­ç‰©ã€ç§’æ€æ´»åŠ¨ï¼‰")]),s._v(" "),t("li",[s._v("é˜²æ­¢æ¶æ„æ”»å‡»ï¼ˆå¦‚çˆ¬è™«ã€DDoS æ”»å‡»ï¼‰")]),s._v(" "),t("li",[s._v("åˆç†åˆ†é…ç³»ç»Ÿèµ„æºï¼Œä¿éšœ VIP ç”¨æˆ·çš„ä¼˜å…ˆçº§")])]),s._v(" "),t("p",[s._v("Spring Cloud Gateway å†…ç½®äº†åŸºäº "),t("strong",[s._v("Redis ä»¤ç‰Œæ¡¶ç®—æ³•")]),s._v("çš„é™æµåŠŸèƒ½")]),s._v(" "),t("p",[t("strong",[s._v("1ï¸âƒ£ æ·»åŠ  Redis ä¾èµ–")])]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.boot"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-boot-starter-data-redis-reactive"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("2ï¸âƒ£ é…ç½®é™æµè§„åˆ™")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("gateway")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" order"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//order"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/orders/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RequestRateLimiter\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-rate-limiter.replenishRate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ¯ç§’è¡¥å…… 10 ä¸ªä»¤ç‰Œ")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-rate-limiter.burstCapacity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å…è®¸çš„æœ€å¤§çªå‘æµé‡")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key-resolver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#{@apiKeyResolver}"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é™æµçš„ key è§„åˆ™")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("strong",[s._v("3ï¸âƒ£ è‡ªå®šä¹‰ Key è§£æå™¨")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("KeyResolver")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("userKeyResolver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" exchange "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Mono")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("just")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("exchange"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRemoteAddress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHostName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("ğŸ‘‰ è¿™æ ·ï¼Œæ¯ä¸ª IP åœ°å€æ¯ç§’æœ€å¤šåªèƒ½è®¿é—® 10 æ¬¡ APIï¼Œè¶…å‡ºåä¼šè¢«é™æµ")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("ç‰¹æ€§")]),s._v(" "),t("th",[s._v("ç†”æ–­ï¼ˆCircuit Breakerï¼‰")]),s._v(" "),t("th",[s._v("é™æµï¼ˆRate Limitingï¼‰")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("ç›®çš„")]),s._v(" "),t("td",[s._v("ä¿æŠ¤æœåŠ¡ï¼Œé˜²æ­¢é›ªå´©")]),s._v(" "),t("td",[s._v("ä¿æŠ¤ç³»ç»Ÿï¼Œé˜²æ­¢è¿‡è½½")])]),s._v(" "),t("tr",[t("td",[s._v("è§¦å‘æ¡ä»¶")]),s._v(" "),t("td",[s._v("è¿œç¨‹æœåŠ¡æ•…éšœç‡é«˜")]),s._v(" "),t("td",[s._v("è®¿é—®é‡è¶…å‡ºé™åˆ¶")])]),s._v(" "),t("tr",[t("td",[s._v("ä½œç”¨")]),s._v(" "),t("td",[s._v("æš‚åœè®¿é—®æ•…éšœæœåŠ¡")]),s._v(" "),t("td",[s._v("é™åˆ¶è¯·æ±‚é€Ÿç‡")])]),s._v(" "),t("tr",[t("td",[s._v("é€‚ç”¨åœºæ™¯")]),s._v(" "),t("td",[s._v("å¾®æœåŠ¡é—´è°ƒç”¨")]),s._v(" "),t("td",[s._v("API ç½‘å…³ã€ç§’æ€æ´»åŠ¨")])]),s._v(" "),t("tr",[t("td",[s._v("å®ç°å·¥å…·")]),s._v(" "),t("td",[s._v("Resilience4Jã€Hystrix")]),s._v(" "),t("td",[s._v("Spring Cloud Gatewayã€Redis")])])])]),s._v(" "),t("h3",{attrs:{id:"ç†”æ–­-vs-é™æµ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç†”æ–­-vs-é™æµ"}},[s._v("#")]),s._v(" ç†”æ–­ VS é™æµ")]),s._v(" "),t("p",[s._v("ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç†”æ–­ï¼Ÿä»€ä¹ˆæ—¶å€™ä½¿ç”¨é™æµï¼Ÿ")]),s._v(" "),t("ul",[t("li",[s._v("ç†”æ–­ï¼šå½“ä½ è°ƒç”¨çš„"),t("strong",[s._v("è¿œç¨‹æœåŠ¡å˜æ…¢æˆ–å´©æºƒ")]),s._v("æ—¶ï¼Œé˜²æ­¢è¯·æ±‚ç»§ç»­å †ç§¯å¯¼è‡´æ•´ä¸ªç³»ç»ŸæŒ‚æ‰")]),s._v(" "),t("li",[s._v("é™æµï¼šå½“ä½ çš„æœåŠ¡"),t("strong",[s._v("æµé‡æš´å¢")]),s._v("æ—¶ï¼Œé˜²æ­¢æœåŠ¡å™¨èµ„æºè¢«è€—å°½")])]),s._v(" "),t("p",[s._v("ç°å®æ¡ˆä¾‹")]),s._v(" "),t("ul",[t("li",[s._v("æ·˜å®åŒåä¸€ï¼šé«˜å¹¶å‘"),t("strong",[s._v("é™æµ")]),s._v("ï¼Œé˜²æ­¢æµé‡å†²å®ç³»ç»Ÿ")]),s._v(" "),t("li",[s._v("å¾®ä¿¡æ”¯ä»˜ï¼šå¦‚æœæ”¯ä»˜æ¥å£æ•…éšœï¼Œå¯ç”¨"),t("strong",[s._v("ç†”æ–­")]),s._v("ï¼Œæ˜¾ç¤ºâ€œæ”¯ä»˜ç³»ç»Ÿç¹å¿™â€")])]),s._v(" "),t("p",[t("strong",[s._v("æ€»ç»“")])]),s._v(" "),t("ul",[t("li",[s._v("ç†”æ–­ç”¨äº"),t("strong",[s._v("ä¿æŠ¤æœåŠ¡")]),s._v("ï¼Œé˜²æ­¢é›ªå´©æ•ˆåº”")]),s._v(" "),t("li",[s._v("é™æµç”¨äº"),t("strong",[s._v("å¹³ç¨³æµé‡")]),s._v("ï¼Œé˜²æ­¢é«˜å¹¶å‘æ‹–å®ç³»ç»Ÿ")]),s._v(" "),t("li",[t("strong",[s._v("Spring Cloud Resilience4J")]),s._v(" æä¾›"),t("strong",[s._v("ç†”æ–­")]),s._v("æœºåˆ¶ï¼Œ"),t("strong",[s._v("Spring Cloud Gateway")]),s._v(" æä¾›"),t("strong",[s._v("é™æµ")]),s._v("åŠŸèƒ½")])]),s._v(" "),t("p",[s._v("å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ç”¨é˜¿é‡Œçš„å¼€æºä¸­é—´ä»¶ Seatinel å®ç°é™æµç†”æ–­ï¼Œæ–¹æ³•å¤šç§å¤šæ ·")])])}),[],!1,null,null,null);t.default=e.exports},718:function(s,t,a){s.exports=a.p+"assets/img/2729274-20230205163347683-397320818.b336006b.png"},719:function(s,t,a){s.exports=a.p+"assets/img/e84842ce8a18fb34d9907169bad94a7f.027fc02e.png"},720:function(s,t,a){s.exports=a.p+"assets/img/20190813232949316.f538284c.png"}}]);