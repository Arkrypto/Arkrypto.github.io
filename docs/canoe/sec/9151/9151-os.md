---
title: 操作系统 - 9151
date: 2024-3-7
---

## OS 概述

操作系统特征

- 并发性，记清楚了，不是并行性
- 共享性
- 虚拟性
- 异步性

操作系统历程：原始操作系统 ——> 管理系统 ——> 操作系统

不同操作系统

- 批处理系统：关注吞吐量
- 分时：关注交互性
- 实时：关注及时响应（通过中断机制）

微内核和宏内核：微内核的效率更低，因为需要频繁切换状态（内核态和用户态）

## 作业管理和用户接口

系统调用，中断

作业的调度算法

- 先来先：FCFS
- 短作业优先：SJF
- 相应比高者优先：相应比 = 已等待时间 / 所需 CPU 时间

SPOOLing 系统

- 输入输出缓存区
- 输入输出井

## 进程管理

### 进程调度

进程状态：就绪、阻塞、执行、终止

进程控制块：PCB

进程是资源分配的基本单位，线程是资源调度的基本单位

进程调度算法

- 先来先服务：FCFS
- 最短 CPU 运行期优先：SCBF
- 最高优先权：HPF，分为静态和动态、抢占式和非抢占式
- 时间片轮转：RR
- 多级反馈队列：MFQS

周转时间：进程终止时间 - 进程调入时间

用户级线程和内核级线程：后者需要进入内核态，前者不需要

临界资源与临界区

### 同步与互斥

信号量机制，P/V 操作，同步互斥设计

进程通信

- 共享内存：Redis
- 消息传递：WebSocket
- 管道传输：RabbitMQ

### 死锁

死锁预防：破坏死锁产生的必要条件

- 破坏互斥条件：SPOOLing
- 破坏不可剥夺条件：抢夺式分配
- 破坏保持请求条件：一次性分配
- 破坏循环等待条件：给资源编号

死锁避免：银行家算法

死锁检测：资源分配图，矩形中的圆圈表示资源，圆圈表示进程，箭头朝进程表示分配，朝资源表示请求分配，通过撤销进程来判断资源是否足够分配（若撤销了还不够，说明产生死锁）

死锁解除

- 撤销所有陷入死锁的进程：一刀切
- 逐个撤销陷入死锁中的进程：逐个抓
- 使陷入死锁中的进程逐个放弃所占有资源，直到死锁消失：注意此时并不撤销进程，只是令其放弃资源，转入阻塞队列

## 存储管理

就是内存管理

程序的链接、装入

地址重定位

### 连续分配

内存连续分配存储管理

- 静态分配局部置换
- 动态分配全局置换
- 动态分配局部置换

分区分配算法

- 首次适应 FF：地址升序
- 最差适应 WF：空闲区大小降序排列
- 最优适应 BF：空闲区大小升序排列（产生最多的内部碎片）

### 离散分配

分页

分段

段页式

### 虚拟存储

程序的局部性原理

请求分页式存储管理

页面置换算法

- 先进先出：FIFO
- 最近最久未使用：LRU
- 最近未使用：NRU

## 文件管理

### 文件

逻辑结构、物理结构

存储逻辑结构

- 连续
- 链接
- 索引
- Hash

存储物理结构

- 顺序存储
- 链式存储：分为隐式和显式（链接表 FAT）
- 索引存储

文件控制块：FCB

索引节点，索引表，文件打开表，系统打开表

### 目录管理

二级目录

树形目录

### 磁盘管理

非空闲磁盘管理

空闲磁盘管理

- 空闲表法
- 空闲链表法
- 位示图：FAT（不允许同名文件）
- 成组链接法：UNIX

可变分区存储管理

磁盘调度算法

- 先来先服务：FCFS
- 最短寻道时间优先：SSTF
- 电梯调度算法：SCAN
- 优化的电梯调度算法：C-SCAN

## 设备管理

缓冲技术

- 单缓冲区
- 双缓冲区
- 缓冲池

计算任务最快时间，类似流水线的计算方法，着眼于当前状态到下一同一状态所经时间

SPOOLing 技术

- 输入输出井
- 输入输出缓冲区
- 输入输出进程

磁盘的访问时间计算：寻道时间

磁盘调度算法
