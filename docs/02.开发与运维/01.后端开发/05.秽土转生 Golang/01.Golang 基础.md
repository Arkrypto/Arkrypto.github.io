---
date: 2025-3-23
author: 
  name: northboat
  link: https://github.com/northboat
title: Golang åŸºç¡€
permalink: /pages/48385f/
---

## ç¯å¢ƒæ­å»º

### Golang

é•œåƒç«™ä¸‹è½½ï¼š[All releases - The Go Programming Language](https://golang.google.cn/dl/)

æµ‹è¯•ç‰ˆæœ¬ç¯å¢ƒ

```go
go version
go env
```

### Goland

å®˜ç½‘ä¸‹è½½ï¼š[Other Versions - GoLand](https://www.jetbrains.com/go/download/other.html)

ç ´è§£ï¼š[GoLand 2024.3.3 æœ€æ–°ç ´è§£ç‰ˆå®‰è£…æ•™ç¨‹ï¼ˆé™„æ¿€æ´»ç ï¼Œè‡³2099å¹´~ï¼‰ - çŠ¬å°å“ˆæ•™ç¨‹](https://www.quanxiaoha.com/goland-pojie/goland-pojie-202433.html)

ğŸ™Œ PSï¼šå¯ä»¥ä¸‹ä¸ª Python Community Edition æ’ä»¶ï¼Œè¿™ç©æ„å„¿å¯ä»¥ç”¨æ¥å†™ Python

### Go Module

ä» Go1.13 å¼€å§‹ï¼ŒGo Module ä½œä¸º Golang ä¸­çš„æ ‡å‡†åŒ…ç®¡ç†å™¨ï¼Œåœ¨å®‰è£…æ—¶è‡ªåŠ¨å¯ç”¨ï¼Œå¹¶é™„å¸¦ä¸€ä¸ªé»˜è®¤çš„ GOPROXY

- GOPROXY å³ä¸º GOPROXY çš„ä¸‹è½½æº
- Go Module é€šè¿‡é…ç½®æ–‡ä»¶ go.mod è¿›è¡ŒåŒ…ç®¡ç†

å…¬å…± GOPROXY æ˜¯ä¸€ä¸ªé›†ä¸­å¼çš„å­˜å‚¨åº“ï¼Œå®ƒç¼“å­˜äº†å¤§é‡å¼€æºçš„ Go æ¨¡å—ï¼Œè¿™äº›æ¨¡å—å¯ä»¥ä»ç¬¬ä¸‰æ–¹å…¬å¼€è®¿é—®çš„ VCS é¡¹ç›®å­˜å‚¨åº“ä¸­è·å¾—

- å¤§å¤šæ•°æ­¤ç±» GOPROXYï¼Œæ¯”å¦‚ JFrog GoCenterï¼Œhttp://Goproxy.cn éƒ½æ˜¯å…è´¹æä¾›ç»™ Golang å¼€å‘ç¤¾åŒºçš„

å…¬å…± GOPROXY çš„æ¶æ„æ‹“æ‰‘å¦‚ä¸‹å›¾ï¼Œæä¾›äº† Go Module çš„ä¸€è‡´æ€§ä»¥åŠå¯ç”¨æ€§èƒ½åŠ›

<img src="./assets/v2-fbe376a40910b809278beadb50a0765a_1440w.png">

åœ¨ Go æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ `import()` å¯¼å…¥åŒ…

```go
import (
    "fmt"
    "math/rand"
)
```

åˆ›å»ºè‡ªå®šä¹‰åŒ…

åœ¨ `mypackage` ç›®å½•ä¸‹åˆ›å»º `calculation.go` æ–‡ä»¶ï¼š

```go
package mypackage

func Add(a, b int) int {
    return a + b
}
```

åœ¨ `main.go` ä¸­ä½¿ç”¨è‡ªå®šä¹‰åŒ…ï¼š

```go
import (
    "fmt"
    "mypackage"
)

func main() {
    result := mypackage.Add(3, 5)
    fmt.Println(result) // è¾“å‡º: 8
}
```

æ³¨æ„ï¼ŒGo è¯­è¨€ä¸­**å‡½æ•°ï¼ˆæˆ–å˜é‡ã€ç»“æ„ä½“ç­‰ï¼‰çš„å¯è§æ€§**æ˜¯ç”±å…¶**é¦–å­—æ¯çš„å¤§å°å†™**å†³å®šçš„ã€‚å…·ä½“è§„åˆ™å¦‚ä¸‹

- é¦–å­—æ¯å¤§å†™ï¼šè¡¨ç¤ºè¯¥å‡½æ•°ï¼ˆæˆ–å˜é‡ã€ç»“æ„ä½“ç­‰ï¼‰æ˜¯å¯¼å‡ºçš„ï¼ˆexportedï¼‰ï¼Œå¯ä»¥è¢«å…¶ä»–åŒ…è®¿é—®
- é¦–å­—æ¯å°å†™ï¼šè¡¨ç¤ºè¯¥å‡½æ•°ï¼ˆæˆ–å˜é‡ã€ç»“æ„ä½“ç­‰ï¼‰æ˜¯æœªå¯¼å‡ºçš„ï¼ˆunexportedï¼‰ï¼Œåªèƒ½åœ¨å½“å‰åŒ…å†…è®¿é—®

æ–‡ä»¶åå…¶å®ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æ–‡ä»¶å¤¹åï¼Œå› ä¸ºåœ¨ Main å‡½æ•°ä¸­è°ƒç”¨æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯`æ–‡ä»¶å¤¹å.å¤§å†™å‡½æ•°()`çš„å½¢å¼è¿›è¡Œè°ƒç”¨

## åŸºç¡€è¯­æ³•

> Golang åŸºç¡€
>
> - åŸºç¡€è¯­æ³•ï¼šå˜é‡ã€æ•°æ®ç±»å‹ã€æ§åˆ¶ç»“æ„ï¼ˆif/for/switchï¼‰ã€å‡½æ•°
> - æ•°æ®ç»“æ„ï¼šæ•°ç»„ã€åˆ‡ç‰‡ã€æ˜ å°„ï¼ˆmapï¼‰ã€æŒ‡é’ˆ
> - ç»“æ„ä½“ä¸æ¥å£ï¼šé¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ–¹å¼
> - å¹¶å‘ç¼–ç¨‹ï¼šGoroutineã€Channelã€WaitGroupã€Mutex
>
> å¤šå†™å°é¡¹ç›®ï¼Œæ¯”å¦‚ç”¨ Go å®ç°ä¸€ä¸ªç®€å•çš„ CLI å·¥å…·ï¼›ä½¿ç”¨ `go test` è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œç†Ÿæ‚‰æµ‹è¯•æ¡†æ¶

ç¬¬ä¸€ä¸ª Go ç¨‹åº

```go
package main
import (
	"fmt"
)

func main() {
	s := "Hello Golang!"
	fmt.Println(s)
	for i := 1; i <= 5; i++ {
		fmt.Println("i =", 100/i)
	}
}
```

### å˜é‡ä¸å¸¸é‡

å˜é‡å®šä¹‰

- å®šä¹‰å˜é‡æ— éœ€æŒ‡å®šå˜é‡ç±»å‹ï¼ŒåŒæ—¶ä½¿ç”¨`:=`è¿›è¡Œå®šä¹‰
- è¯­å¥é€šè¿‡æ¢è¡Œåˆ†å‰²ï¼Œä¸ç”¨åˆ†å·ï¼ˆç±»ä¼¼äº Pythonï¼‰ï¼Œä½†ä»ç„¶ä½¿ç”¨æ‹¬å·ï¼Œå¹¶ä¸é‡‡ç”¨ç¼©è¿›æ¥è¡¨ç¤ºåµŒå¥—å±‚çº§

`fmt.Printf`è¾“å‡º

```go
num := 4
str := "hahaha"
float := 3.14
char := 'A'
fmt.Printf("%d, %s, %f, %c\n", num, str, float, char)
fmt.Printf("%v, %v, %v, %v", num, str, float, char)
```

`%v`æ˜¯é€šç”¨è¾“å‡ºï¼Œæµ®ç‚¹æ•°å°†è¢«å°±è¿‘â€œå–æ•´â€ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œç¬¬ä¸€æ¬¡å°†è¾“å‡º`3.140000`ï¼Œç¬¬äºŒæ¬¡åˆ™æ˜¯`3.14`ã€‚å¦å¤–ï¼Œ`%v`ä¸‹å­—ç¬¦å°†è¢«è¾“å‡ºä¸º ASCII ç 

```bash
4, hahaha, 3.140000, A
4, hahaha, 3.14, 65
```

`fmt.Println`è¾“å‡ºï¼Œç”¨äºå¿«é€Ÿè°ƒè¯•ï¼Œåº”è¯¥æ˜¯ç”¨çš„æœ€å¤šçš„

- `fmt.Println` ä¼šåœ¨æ¯ä¸ªå‚æ•°ä¹‹é—´è‡ªåŠ¨æ’å…¥**ç©ºæ ¼**
- å¹¶åœ¨ç»“å°¾æ·»åŠ **æ¢è¡Œç¬¦**ï¼ˆ`\n`ï¼‰ï¼Œè‹¥ä¸æƒ³æ¢è¡Œï¼Œå¯ç”¨`Print`ï¼ˆ`Print`ä¸ä¼šè‡ªåŠ¨æ·»åŠ ç©ºæ ¼ï¼‰

### æ§åˆ¶ç»“æ„

1ï¸âƒ£ if è¯­å¥

Go çš„ `if` è¯­å¥å’Œ Java ç±»ä¼¼ï¼Œä½†æ¡ä»¶è¯­å¥ä¸éœ€è¦æ‹¬å·ï¼Œè€Œå¤§æ‹¬å·`{}`å¿…é¡»å­˜åœ¨

```go
if age > 18 {
    fmt.Println("Adult")
}
```

åœ¨`if`è¯­å¥ä¸­å¯ä»¥å®šä¹‰å˜é‡ï¼Œä¾‹å¦‚

```go
num := rand.Int() // å–éšæœºæ•°
if i := num - 3875633537609512361; i > 0 {
    fmt.Println(i, mypackage.SayHello())
} else {
    fmt.Println(i, mypackage.SayHelloAgain())
}
```

è¿™ä¸ª`i`çš„ä½œç”¨åŸŸä»…åœ¨`if`åŸŸä¸­

2ï¸âƒ£ for è¯­å¥

Go ä¸­æ²¡æœ‰ While å¾ªç¯ï¼Œé‡‡ç”¨ for ä»£æ›¿
$$
while(true)\{\}=for\{\}
$$
ä¸€ä¸ªç»å…¸çš„ for å¾ªç¯ï¼Œåªæ˜¯åœ¨ Java çš„åŸºç¡€ä¸Šå»æ‰äº†å°æ‹¬å·

```go
for i := 0; i < 5; i++ {
    fmt.Println(i)
}
```

ä¸€ä¸ªæ­»å¾ªç¯

```go
for{
    fmt.Println("nmsl")
}
```

ä¸€ä¸ªç±»ä¼¼äº while çš„ for å¾ªç¯

```go
i := 0
for i < 5 {
    fmt.Println(i)
    i++
}
```

ä½†æ˜¯æ³¨æ„ä¸å¯ä»¥`i++ < 5`è¿™æ ·åˆ¤æ–­

3ï¸âƒ£ switch è¯­å¥

Go çš„`switch`ä¸éœ€è¦`break`ï¼ŒåŒ¹é…æˆåŠŸåé»˜è®¤ä¸ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª caseï¼Œä¸åƒ Java é‚£æ ·éœ€è¦`break`æ‰‹åŠ¨è·³å‡º

```go
day := "Monday"
switch day {
case "Monday":
    fmt.Println("Start of the week")
case "Friday":
    fmt.Println("Weekend is near")
default:
    fmt.Println("Midweek")
}
fmt.Println("Start TestSwitch()!\n")
```

å¤šå€¼åŒ¹é…ï¼Œç”¨é€—å·è¿æ¥

```go
switch day {
case "Saturday", "Sunday":
    fmt.Println("Weekend")
default:
    fmt.Println("Weekday")
}
```

switch åå¯ä»¥ä¸æ¥å˜é‡ï¼Œè€Œåœ¨ case åæ·»åŠ å¸ƒå°”å€¼ï¼Œè¿™æ · switch è¯­å¥å°†æ‰§è¡Œç¬¬ä¸€ä¸ªä¸º true çš„ caseï¼Œå½“ä½œä¸€ä¸ª if-else è¯­å¥æ¥ç”¨

```go
score := 85
switch {
case score >= 90:
    fmt.Println("A")
case score >= 80:
    fmt.Println("B")
default:
    fmt.Println("C")
}
```

ä½¿ç”¨`fallthrough`ä¿®é¥° caseï¼Œé‚£ä¹ˆæ‰§è¡Œå®Œå½“å‰ case åå°†ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª case

```go
switch num := 2; num {
case 1:
    fmt.Println("One")
case 2:
    fmt.Println("Two")
    fallthrough  // ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª case
case 3:
    fmt.Println("Three")
case 4:
    fmt.Println("Four")
}
```

å½“ç„¶ï¼Œåªå¾€ä¸‹æ‰§è¡Œä¸€æ¡ï¼Œå³è¾“å‡ºä¼šä¸º

```sh
Two
Three
```

### å‡½æ•°

> åœ¨ Go ä¸­ï¼Œå‡½æ•°ï¼ˆFunctionï¼‰æ˜¯**ä¸€ç­‰å…¬æ°‘**ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ã€è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åå‡½æ•°

å‡½æ•°å®šä¹‰ï¼Œåœ¨ go ä¸­ï¼Œä½¿ç”¨å…³é”®å­—`func`å®šä¹‰ä¸€ä¸ªå‡½æ•°

```go
func å‡½æ•°å(å‚æ•°åˆ—è¡¨) (è¿”å›å€¼åˆ—è¡¨) {
    // å‡½æ•°ä½“
}
```

æ ¹æ®å…¥å‚å’Œè¿”å›ï¼Œæœ‰è¿™æ ·å‡ ç§å‡½æ•°å®šä¹‰

1ï¸âƒ£ æ— å…¥å‚æ— è¿”å›

```go
func sayHello() {
    fmt.Println("Hello, Go!")
}
```

2ï¸âƒ£ æœ‰å…¥å‚æ— è¿”å›

```go
func add(x int, y int) {
    fmt.Println("Sum:", x+y)
}
```

å¦‚æœå¤šä¸ªå‚æ•°ç±»å‹ç›¸åŒï¼Œå¯ä»¥çœç•¥å‰é¢çš„ç±»å‹ï¼Œåªå†™æœ€åä¸€ä¸ªï¼Œå¦‚

```go
func hello(x, y int, name string){
    fmt.Println("Hello,", name)
    fmt.Println("Sum:", x+y)
}
```

å¦å¤–ï¼Œæ³¨æ„**å‚æ•°æ˜¯å€¼ä¼ é€’ï¼Œä¸ä¼šå½±å“åŸå˜é‡**

3ï¸âƒ£ æœ‰è¿”å›

```go
func add(x, y int) int {
    return x + y
}
```

åœ¨å°æ‹¬å·åå®šä¹‰è¿”å›ç±»å‹ï¼Œå¦‚è¿™é‡Œå®šä¹‰è¿”å›ç±»å‹ä¸º`int`

å¯ä»¥å®šä¹‰å¤šä¸ªè¿”å›å€¼ï¼ˆè€Œä¸éœ€è¦ç”¨æ•°ç»„è¿”å›ï¼‰

```go
func swap(a, b int) (int, int) {
    return b, a
}
```

4ï¸âƒ£ å‘½åè¿”å›å€¼

æˆ‘ä»¬å¯ä»¥åœ¨è¿”å›å€¼åˆ—è¡¨ç›´æ¥å®šä¹‰è¿”å›å˜é‡åï¼Œä»è€Œåœ¨`return`æ—¶ï¼Œå¯ä»¥çœç•¥æ‰`return`çš„å˜é‡ï¼Œåƒä¸€ä¸ªæ— è¿”å›çš„å‡½æ•°ç›´æ¥`return`å°±è¡Œ

```go
func rectangleArea(length, width int) (area int) {
    area = length * width
    return // çœç•¥ return area
}

func main() {
    fmt.Println(rectangleArea(5, 10)) // 50
}
```

å®é™…ä¸Šï¼Œå°±æ˜¯åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™åˆ›å»ºäº†è¿™ä¸ªè¿”å›å˜é‡ï¼Œå¾ˆæ™ºèƒ½çš„è®¾è®¡ï¼Œé€‚åˆä¸‹å‘å¼€å‘ä»»åŠ¡ ğŸ¤“ï¼Œæœ€è§„èŒƒçš„ä¸€é›†

5ï¸âƒ£ å˜é•¿å…¥å‚

- å…¥å‚åˆ—è¡¨`(numbers ...int)` ä¼šæŠŠæ‰€æœ‰å‚æ•°ä½œä¸º**åˆ‡ç‰‡**å¤„ç†
- å¯å˜å‚æ•°å¯ä»¥å’Œæ™®é€šå‚æ•°æ··ç”¨ï¼Œä½†**å¯å˜å‚æ•°å¿…é¡»æ”¾åœ¨æœ€å**

```go
func sum(numbers ...int) int {
    total := 0
    for _, num := range numbers {
        total += num
    }
    return total
}

func main() {
    fmt.Println(sum(1, 2, 3, 4)) // 10
}
```

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™å’Œæˆ‘ç›´æ¥ä¼ ä¸€ä¸ªåˆ‡ç‰‡æœ‰ä»€ä¹ˆåŒºåˆ«

6ï¸âƒ£ å‡½æ•°ä½œä¸ºå…¥å‚

```go
func operate(a, b int, op func(int, int) int) int {
    return op(a, b)
}

func main() {
    add := func(x, y int) int { return x + y }
    result := operate(3, 5, add)
    fmt.Println(result) // 8
}
```

è¿™é‡Œçš„å‡½æ•° op æ˜¯å˜åŒ–çš„ï¼Œå®ƒå¯ä»¥æ˜¯ addï¼Œä¹Ÿå¯ä»¥æ˜¯ mul æˆ–å…¶ä»–

- è¿™æ ·çš„è®¾è®¡åœ¨ MyLisp çš„ç¼–å†™ä¸­è§è¿‡ï¼Œå†…å»ºå‡½æ•°çš„å®ç°é‡‡ç”¨äº†è¿™ç§å½¢å¼

7ï¸âƒ£ å‡½æ•°ä½œä¸ºè¿”å›

```go
func multiplier(factor int) func(int) int {
    return func(x int) int {
        return x * factor
    }
}

func main() {
    double := multiplier(2)
    fmt.Println(double(5)) // 10
}
```

åœ¨è¿™é‡Œ`double`ä½œä¸ºä¸€ä¸ªå‡½æ•°å˜é‡å­˜åœ¨ï¼Œå¥½ç©æ

8ï¸âƒ£ åŒ¿åå‡½æ•°

å³æ—¶å®šä¹‰å¹¶ä½¿ç”¨

```go
func main() {
    func(msg string) {
        fmt.Println(msg)
    }("Hello, Go!") // ç›´æ¥è°ƒç”¨
}
```

è¿™æ˜¯ä¸€ä¸ªæœ‰å…¥å‚æ— è¿”å›çš„åŒ¿åå‡½æ•°ï¼Œæ‰§è¡Œå°†è¾“å‡º`Hello, Go!`

### å‘½åä¹ æƒ¯

æˆ‘ä»¬çš„æ–‡ä»¶å¤¹ååŸåˆ™ä¸Šè¦å’ŒåŒ…åï¼ˆpackage åï¼‰ä¿æŒä¸€è‡´ï¼Œå³åœ¨ learning æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½æœ‰

```go
package learning
```

è€Œä¸æ˜¯å…¶ä»–åŒ…å

ä¸€äº›å‘½åä¹ æƒ¯

- æ–‡ä»¶å‘½åï¼šå°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿ï¼Œä¾‹å¦‚`my_mysql_test`
- æ–‡ä»¶å¤¹ã€åŒ…å‘½åï¼šå°å†™å­—æ¯è¿æ¥ï¼Œæ¯”å¦‚`mycontrolflow`ï¼Œåº”å°½é‡ç¼©å°ä¸ºå•ä¸ªå•è¯å¦‚`flow`
- å˜é‡å‘½åï¼šå°å†™å­—æ¯èµ·å¤´é©¼å³°ï¼Œæ¯”å¦‚`numSum := 0`
- å¸¸é‡å‘½åï¼šå¤§å†™å­—æ¯åŠ ä¸‹åˆ’çº¿ï¼Œæ¯”å¦‚`KEY_NUM := 4`
- å‡½æ•°ã€ç»“æ„ä½“ã€æ¥å£ã€æ–¹æ³•å‘½åï¼šé©¼å³°ï¼Œå¼€å¤´å¤§å°å†™æ ¹æ® exported å†³å®šï¼Œæ¯”å¦‚`Add(), add()`
- æµ‹è¯•å‡½æ•°å‘½åï¼šTest å¼€å¤´çš„é©¼å³°ï¼Œæ¯”å¦‚`TestAdd()`

## æ•°æ®ç»“æ„

### æ•°ç»„å’Œåˆ‡ç‰‡

åˆ‡ç‰‡çš„å®šä¹‰ï¼š`[]æ•°æ®ç±»å‹{åˆå§‹æ•°æ®1, åˆå§‹æ•°æ®2, ...}`

```go
nums := []int{1, 2, 3}
fnums := []float64{3.14, 2.71, 1.618}
words := []string{"Hello", "Go", "Language"}
flags := []bool{true, false, true}
data := []byte{'a', 'b', 'c'}

// æŒ‡é’ˆåˆ‡ç‰‡
x, y, z := 10, 20, 30
numbers := []*int{&x, &y, &z}
fmt.Println(*numbers[0], *numbers[1], *numbers[2]) // 10 20 30
```

è‹¥æƒ³å®šä¹‰ç©ºçš„åˆ‡ç‰‡æœ‰è¿™æ ·ä¸‰ç§æ–¹æ³•

```go
nums := make([]int, 0) // åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º 0 çš„åˆ‡ç‰‡
nums := []int{}
var nums []int
```

æ¨èç¬¬ä¸€ç§ï¼Œå½“ç„¶ï¼Œå¦‚æœæœ‰ nil çš„åˆ¤æ–­ï¼Œå³åˆ¤æ–­`nums == nil`æ˜¯å¦ä¸ºç©ºçš„æ“ä½œï¼Œæ¨èç¬¬ä¸‰ç§åˆå§‹åŒ–ï¼ˆåœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œä¾‹å¦‚ Json ä¼ è¾“ï¼Œä¼¼ä¹ç¬¬ä¸‰ç§æ›´æœ‰åˆ©ï¼‰

åˆ‡ç‰‡æ“ä½œï¼šç›¸å½“äºå®šä¹‰ä¸€ä¸ª Listï¼Œç„¶åä¸æ–­ add å’Œä¿®æ”¹

```go
nums := make([]int, 0) // å®šä¹‰ä¸€ä¸ªç©ºçš„åˆ‡ç‰‡

// è¿½åŠ å…ƒç´ 
nums = append(nums, 1)
nums = append(nums, 2, 3, 4)
fmt.Println(nums) // è¾“å‡º: [1 2 3 4]

// ä¿®æ”¹å…ƒç´ 
nums[0] = 10
fmt.Println(nums) // è¾“å‡º: [10 2 3 4]
```

å¯ä»¥é€šè¿‡å†…å»ºçš„`len()`å’Œ`cap()`å‡½æ•°æ¥è·å–åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡

- `len()`è¿”å›åˆ‡ç‰‡çš„å…ƒç´ ä¸ªæ•°ï¼ˆå³åˆ‡ç‰‡çš„é•¿åº¦ï¼‰
- `cap()`è¿”å›åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„çš„å®¹é‡ï¼ˆå³åˆ‡ç‰‡æ‰€èƒ½å®¹çº³çš„å…ƒç´ ä¸ªæ•°ï¼Œä¸ä¸€å®šæ˜¯å½“å‰çš„é•¿åº¦

```go
nums := []int{1, 2, 3, 4}

fmt.Println("Length:", len(nums)) // è¾“å‡º: Length: 4
fmt.Println("Capacity:", cap(nums)) // è¾“å‡º: Capacity: 4ï¼ˆæˆ–æ›´å¤§ï¼Œå–å†³äºåº•å±‚æ•°ç»„çš„æ‰©å±•ï¼‰
```

å‡½æ•°è¿”å›

- æ•°ç»„æ˜¯å®šé•¿çš„ï¼Œåœ¨å®šä¹‰æ—¶å¿…é¡»è§„å®šé•¿åº¦ï¼Œç±»ä¼¼äº C ä¸­çš„æ•°ç»„ï¼Œåœ¨å‡½æ•°è¿”å›æ•°ç»„æ—¶ï¼Œå°†å¤åˆ¶æ•´ä¸ªæ•°æ®ç»“æ„è¿›è¡Œè¿”å›ï¼Œæ‰€ä»¥å‡½æ•°è¿”å›é¡ºåºç»“æ„æ—¶ï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯é€‰æ‹©è¿”å›åˆ‡ç‰‡
- åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼ˆæŒ‡é’ˆï¼‰ï¼Œè¿”å›æ—¶ä¸ä¼šå¤åˆ¶åº•å±‚æ•°æ®ï¼Œè€Œæ˜¯è¿”å›å…¶èµ·å§‹æŒ‡é’ˆ

å‡½æ•°è¿”å›æ•°ç»„å’Œåˆ‡ç‰‡

```go
// è¿”å›åˆ‡ç‰‡
func getSlice() []int {
	var nums []int
	// nums := make([]int, 0)
	nums = append(nums, 1, 2, 3, 4)
	return nums
}

// è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º 3 çš„æ•´å‹æ•°ç»„ï¼Œä¸ä¼šä½¿ç”¨
func getArray() [3]int {
	return [3]int{1, 2, 3}
}
```

ä¹‹å‰åœ¨è¯´åˆ°å‡½æ•°æ¥æ”¶å˜é•¿å‚æ•°æ—¶æåˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ï¼šæˆ‘å®šä¹‰ä¸€ä¸ªå˜é•¿å‚æ•°å…¥å‚å’Œå®šä¹‰ä¸€ä¸ªåˆ‡ç‰‡å…¥å‚æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

```go
func Sum() int {
	return Sum1(getSlice()...)
}

func Sum1(nums ...int) int {
	sum := 0
	for _, value := range nums {
		sum += value
	}
	return sum
}

func Sum2(nums []int) int {
	sum := 0
	for _, value := range nums {
		sum += value
	}
	return sum
}
```

ä¹ä¸€çœ‹ç¡®å®å¥½åƒæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯æœ‰äº›å¾®å·®åˆ«ï¼Œç…§ GPT çš„è¯´æ³•ï¼Œå¯å˜å…¥å‚ä¼¼ä¹å¥½äºåˆ‡ç‰‡å…¥å‚

1. å¦‚æœæ˜¯`(nums ... int)`å…¥å‚ï¼Œå…¥å‚å¯ä»¥ä¸ºç©ºï¼Œä½†åˆ‡ç‰‡ä¸è¡Œï¼Œè‡³å°‘éœ€è¦ä¼ å…¥ä¸€ä¸ª`nil`æˆ–ç©ºåˆ‡ç‰‡`[]int{}`ï¼ˆéœ€è¦æ˜¾å¼ä¼ åˆ‡ç‰‡ï¼‰

2. å¯å˜å…¥å‚å¯ä»¥æ¥å—åˆ‡ç‰‡ä½œä¸ºå…¥å‚ï¼Œç”¨ä»¥ä¸‹å½¢å¼

   ```go
   nums := []int{1, 2, 3, 4}
   Sum1(nums...)  // âœ… æ­£ç¡®ï¼Œå°†è¿”å› 10
   ```

ç®€å•æ¥è¯´ï¼šå¯å˜å…¥å‚å¯ä»¥å…¼å®¹åˆ‡ç‰‡ï¼Œè€Œåˆ‡ç‰‡æ— æ³•å…¼å®¹å¤šä¸ªç‹¬ç«‹æ•°å­—

ä½¿ç”¨ for å’Œ range éå†åˆ‡ç‰‡

```go
nums := []int{1, 2, 3}
for index, value := range nums {
    fmt.Println(index, value)
}
```

å½“ä¸éœ€è¦ä½¿ç”¨ index æ—¶ï¼Œç”¨`_`æ›¿ä»£

```go
nums := []int{1, 2, 3}
sum := 0
for _, value := range nums {
    sum += value
}
fmt.Println(sum) // è¾“å‡º 6
```

### æ˜ å°„

map çš„å®šä¹‰ï¼š`map[é”®]å€¼{}`ç¬¬ä¸€ä¸ªä¸­æ‹¬å·ä¸º**é”®**ç±»å‹ï¼Œä¹‹åè·Ÿ**å€¼**ç±»å‹ï¼Œä¸­æ‹¬å·ä¸­ä¸ºåˆå§‹æ•°æ®

```go
strMapInt := make(map[string]int)
intMapInt := make(map[int]int)
intMapStr := make(map[int]string)

var strMapInt1 map[string]int
strMapInt2 := map[string]int{}
```

å®šä¹‰é€»è¾‘å…¶å®å’Œåˆ‡ç‰‡ä¸€æ ·ï¼Œç‰¹åˆ«æ˜¯åˆå§‹åŒ–ç©ºçš„æƒ…å†µï¼Œç”¨ make æˆ–è€… var

è¿½åŠ å…ƒç´ ï¼šç›´æ¥å®šä¹‰å°±è¡Œï¼Œæ¯”å¦‚å¯¹äº`m := make(map[string]string)`ï¼Œæƒ³è¦æ’å…¥å…ƒç´ ï¼Œç›´æ¥ç”¨`m["nmsl"] = wdnmd`å°±è¡Œï¼Œä»–ä¼šè‡ªè¡Œåˆ¤æ–­å®¹é‡è‡ªåŠ¨æ‰©å®¹

- å¤ªæ™ºèƒ½äº†ï¼Œé€†å¤©

å‡½æ•°è¿”å› map

```go
// è¿”å›ä¸€ä¸ª map
func getMap() map[string]int {
    var m map[string]int
    // m := map[string]int{}
    // m := make(map[string]int)
    m["one"] = 1
    m["two"] = 2
    return m
}

// åˆ›å»ºå‡½æ•°æ—¶å®šä¹‰è¿”å›å˜é‡
func getMap1() (m map[string]int) {
    m["one"] = 1
    m["two"] = 2
    return
}
```

ä½¿ç”¨ for å’Œ range éå†æ˜ å°„

```go
m := map[string]int{"a": 1, "b": 2}
for k, v := range m {
    fmt.Println(k, v)
}
```

å…¶ä»–çš„éå†ï¼Œä¸¤æ•°ä¹‹å’Œ

```go
func twoSum(nums []int, target int) []int {
    m := make(map[int]int)
    for index, val := range nums{
        if prevIndex, prevVal := m[target-val]; prevVal{
            return []int{prevIndex, index}
        }
        m[val] = index
    }
    return nil
}
```

é‡ç‚¹æ˜¯ç¬¬å››è¡Œçš„ if è¯­å¥ï¼Œè¿™å¥åˆ°åº•å¹²äº†ä»€ä¹ˆ

```go
if prevIndex, prevVal := m[target-val]; prevVal{}
```

æˆ‘ä»¬åªéœ€è¦æ˜ç¡®ï¼Œ`m[target-val]`åˆ°åº•è¿”å›çš„æ˜¯ä»€ä¹ˆï¼Œå…¶å®æ˜¯ä¸¤ä¸ªå€¼ï¼Œåˆ†åˆ«æ˜¯ç´¢å¼•å’Œå€¼å†…å®¹ï¼Œif æœ€åçš„`prevVal`å®é™…ä¸Šå°±æ˜¯åœ¨åˆ¤æ–­è¿™ä¸ªç´¢å¼•ä¸‹åˆ°åº•å­˜ä¸å­˜åœ¨å†…å®¹

ä¿¡æ¯é‡æ˜¯å¦æœ‰ç‚¹å¤§ï¼Œæˆ‘ç³™ä½ çš„ï¼Œå®é™…ä¸Šç­‰ä»·äº

```go
for index, val := range nums{
    preIndex, preVal := m[target-val]
    if preVal{
        return []int{preIndex, index}
    }
    m[val] = index
}
```

è¿™å’Œ if è¯­å¥é‡Œé¢èƒ½è¿›è¡Œå˜é‡çŸ­å£°æ˜ä¹Ÿæœ‰å…³ï¼Œæå¤§çš„å‹ç¼©äº†ç¼–å†™

### ç»“æ„ä½“

é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€

### æ¥å£

ç»“æ„ä½“è¾“å‡ºï¼šé€šè¿‡`Printf`æ ¼å¼åŒ–`%+v`è¿›è¡Œç»“æ„ä½“å€¼è¾“å‡ºï¼ˆå¦åˆ™ä¼šè¾“å‡ºåœ°å€ï¼‰

```go
fmt.Printf("%+v", myStruct)
```

## å¹¶å‘ç¼–ç¨‹

### Go åç¨‹å’Œ Channel



### Select è¯­å¥

`select`ç±»ä¼¼`switch`ï¼Œä½†ç”¨äºå¤„ç†`channel`çš„å¹¶å‘é€šä¿¡

- `select`ä¼šç­‰å¾…æŸä¸ª`case`å˜ä¸ºå¯ç”¨ï¼ˆå³`channel`æœ‰æ•°æ®ï¼‰
- `default`åˆ†æ”¯å¯é€‰ï¼Œå¦‚æœæ‰€æœ‰`case`éƒ½é˜»å¡ï¼Œ`default`ç«‹å³æ‰§è¡Œ

```go
ch1 := make(chan string)
ch2 := make(chan string)

go func() {
    ch1 <- "Hello"
}()

go func() {
    ch2 <- "World"
}()

select {
case msg1 := <-ch1:
    fmt.Println("Received", msg1)
case msg2 := <-ch2:
    fmt.Println("Received", msg2)
default:
    fmt.Println("No message received")
}
```
